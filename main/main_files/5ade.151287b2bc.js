__d((function(g,r,i,a,m,e,d){"use strict";function n(){const t=r(d[0]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.createJitneyPropsForImageResource=function({duration:n,encodedBodySize:t,name:f,transferSize:_}){if(!n||n<=0)return;if(!t||t<=0)return;const l=(function(n){if(o.test(n))return'ImageManager';if(u.test(n)&&!c.test(n))return'LegacyAkamai';return'Unknown'})(f);if('Unknown'===l)return;const y='ImageManager'===l?(p=f,s(p,/im_w=(\w+)/)):(function(n){return s(n,/aki_policy=(\w+)/)})(f);var p;return{image_cache_type:0===_?1:0,image_size_bytes:t,image_download_time_ms:Math.floor(n),image_policy:y,image_url:f}},e.sendJitneyEventsForImages=function(o){o.forEach(o=>{t.default.logJitneyEvent({schema:n().PerformanceImageDownloadEvent,event_data:o})})};var t=babelHelpers.interopRequireDefault(r(d[1]));const o=/(?:im_w|im_q)/,u=/aki_policy=/,c=/im\/pictures\/user/;function s(n,t){if(!n)return;const o=n.match(t);return o?o[1]:void 0}}),"21b302",["394000","4cdbd9"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PerformanceImageDownloadEvent=void 0;var n={defaultProps:{schema:'com.airbnb.jitney.event.logging.Performance:PerformanceImageDownloadEvent:2.0.0',event_name:'performance_image_download'},propTypes:{}};e.PerformanceImageDownloadEvent=n,n.fullyQualifiedName='Performance.v2.PerformanceImageDownloadEvent'}),"394000",[]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(t){if(!t)return;const{tagName:n,className:o,id:l,parentElement:s}=t;return JSON.stringify({tagName:n,className:o,id:l,parentElement:s&&{tagName:s.tagName,className:s.className,id:s.id}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){const o=t(n.throttleableMetrics.lcpTarget),l=t(n.throttleableMetrics.ttfmpTarget),s=t(n.throttleableMetrics.autoTTFMPTarget),{alt:c}=n.throttleableMetrics,_=(function(t){return{interactivity_spans:t.throttleableMetrics.interactivitySpans.map(t=>({duration:t.duration,name:t.name,long_task_durations:t.longTaskDurations,number_of_blocking_tasks:t.numberOfBlockingTasks,tbt:t.totalBlockingTime,longest_blocking_time:t.longestBlockingTime})),interactivity_span_aggregations:Object.entries(t.throttleableMetrics.interactivitySpanAggregations).reduce((t,[n,o])=>({...t,[n]:{tbt_per_second:o.totalBlockingTimePerSecond,number_of_blocking_tasks_per_second:o.numberOfBlockingTasksPerSecond,min_frame_drops_per_second:o.minFrameDropsPerSecond,count:o.count,duration:o.duration}}),{})}})(n);return{assets:n.unthrottleableMetrics.assets,page_request_method:n.pageRequestMethod,universal_page_name:n.universalPageName,subpage_name:n.subPageName,impression_uuid:n.impressionUuid,ttfcp:n.throttleableMetrics.ttfcp,ttfmp:n.throttleableMetrics.ttfmp,auto_ttfmp:n.throttleableMetrics.autoTTFMP,fid:n.throttleableMetrics.fid,tbt:n.throttleableMetrics.totalBlockingTime,event_data:n.eventData,event_data_schema:n.eventDataSchema,domain_and_path:n.domainAndPath,network_information:n.networkInformation,web_performance_timing:n.throttleableMetrics.webPerformanceTiming,tbt_pre_hydrate:n.throttleableMetrics.tbtPreHydrate,tbt_post_hydrate:n.throttleableMetrics.tbtPostHydrate,time_to_hydrate:n.throttleableMetrics.timeToHydrate,recorder_duration:n.throttleableMetrics.recorderDuration,time_to_fid:n.throttleableMetrics.timeToFid,number_of_blocking_tasks:n.throttleableMetrics.numberOfBlockingTasks,number_of_long_input_delays:n.unthrottleableMetrics.numberOfLongInputDelays,total_duration_of_long_input_delays:n.unthrottleableMetrics.totalDurationOfLongInputDelays,long_input_delays:n.unthrottleableMetrics.longInputDelays,long_input_delay_counts:n.unthrottleableMetrics.longInputDelayCounts,timed_interactions:n.unthrottleableMetrics.timedInteractions,longest_blocking_time:n.throttleableMetrics.longestBlockingTime,longest_blocking_task_index:n.throttleableMetrics.longestBlockingTaskIndex,cumulative_layout_shift:n.unthrottleableMetrics.cumulativeLayoutShift,lcp:n.throttleableMetrics.lcp,..._,document_age:n.unthrottleableMetrics.documentAge,inline_stylesheet_rules:n.unthrottleableMetrics.inlineStylesheetRules,external_stylesheet_rules:n.unthrottleableMetrics.externalStylesheetRules,is_dev:n.isDev,metadata:{...o&&{lcpTarget:o},...s&&{autoTTFMPTarget:s},...l&&{ttfmpTarget:l},...'number'==typeof c&&{alt:String(c)}}}}}),"4e0da4",[]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(t,n){const{longTasks:c}=t,{start:u,end:o}=n;return c.filter(t=>t.startTime>=u&&(!o||t.startTime<o)).sort((t,n)=>t.startTime-n.startTime).map((t,n)=>({entry:t,index:n}))}function n(t){return t.reduce((t,n)=>t+n.entry.duration-50,0)}function c(c,u){return n(t(c,u))}function u(t){if(0!==t.length)return t.reduce((t,n)=>n.entry.duration>t.entry.duration?n:t,t[0])}function o(n){const{ttfcp:c=0}=n;return u(t(n,{start:c}))}function l(t){if(t)return t.entry.duration-50}Object.defineProperty(e,"__esModule",{value:!0}),e.calculateInteractivityMetricsInInterval=function(c,o){const s=t(c,o);return{longTaskDurations:s.map(t=>t.entry.duration),totalBlockingTime:n(s),numberOfBlockingTasks:s.length,longestBlockingTime:l(u(s))}},e.calculateLongestBlockingTaskIndex=function(t){var n;return null===(n=o(t))||void 0===n?void 0:n.index},e.calculateLongestBlockingTime=function(t){return l(o(t))},e.calculateNumberOfBlockingTasks=function(t){return t.longTasks.length},e.calculateTbtPostHydrate=function(t,n){const{ttfcp:u=0}=t;if(void 0===n)return;return c(t,{start:Math.max(n,u)})},e.calculateTbtPreHydrate=function(t,n){const{ttfcp:u=0}=t;if(void 0===n)return;return c(t,{start:u,end:n})},e.calculateTotalBlockingTime=function(t){const{ttfcp:n=0}=t;return c(t,{start:n})}}),"695adb",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InteractivitySpanName=void 0,e.aggregateInteractivitySpans=function(t){const n=new Map;t.forEach(t=>{var s;const{name:c}=t;n.has(c)||n.set(c,[]),null===(s=n.get(c))||void 0===s||s.push(t)});const s={};return n.forEach((t,n)=>{const c=t.reduce((t,n)=>t+n.duration,0),o=t.reduce((t,n)=>t+n.totalBlockingTime,0),u=t.reduce((t,n)=>t+n.numberOfBlockingTasks,0),E=t.flatMap(t=>t.longTaskDurations),N=E.map(t=>(t-16.666666666666668)/16.666666666666668).reduce((t,n)=>t+n,0);0!==c&&(s[n]={totalBlockingTimePerSecond:o/c*1e3,numberOfBlockingTasksPerSecond:u/c*1e3,minFrameDropsPerSecond:N/c*1e3,duration:c,count:t.length})}),s},e.beginInteractivitySpan=function(t){c(t,'BEGIN')},e.endInteractivitySpan=function(t){c(t,'END')},e.getInteractivitySpans=function(c){const o=(0,t.default)(),u=Object.values(n).reduce((t,n)=>[...t,...o.getEntriesByName(s(n,'BEGIN'),'mark'),...o.getEntriesByName(s(n,'END'),'mark')],[]).filter(t=>t.startTime>=c.start&&t.startTime<c.end);return u.sort((t,n)=>t.startTime-n.startTime),(function(t,n){const s=new Set,c=new Map,o=[];return t.forEach(t=>{const{name:u,event:E}=(function(t){const n=t.endsWith('_END')?'END':'BEGIN';return{name:t.slice('PPS_SPAN_'.length,-(n.length+1)),event:n}})(t.name);'BEGIN'===E?c.has(u)||c.set(u,t.startTime):(c.has(u)?o.push({name:u,start:c.get(u),end:t.startTime}):s.has(u)||o.push({name:u,start:n.start,end:t.startTime}),c.delete(u),s.add(u))}),c.forEach((t,s)=>{o.push({name:s,start:t,end:n.end})}),o})(u,c)};var t=babelHelpers.interopRequireDefault(r(d[0]));let n;function s(t,n){return`PPS_SPAN_${t}_${n}`}function c(n,c){(0,t.default)().mark(s(n,c))}e.InteractivitySpanName=n,(function(t){t.DESKTOP_MAP_INTERACTION="DESKTOP_MAP_INTERACTION",t.MOWEB_MAP_INTERACTION="MOWEB_MAP_INTERACTION",t.MOWEB_MAP_USER_INTERACTION="MOWEB_MAP_USER_INTERACTION",t.DESKTOP_MAP_CHANGE_INTERACTION="DESKTOP_MAP_CHANGE_INTERACTION"})(n||(e.InteractivitySpanName=n={}))}),"6cda14",["be93ab"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return t.default.get('china-guest-loop')};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"6f9d08",["05b07c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateAdditionalLoadTime=function(t,n){const s=u(o(t,n));if(0===s.length)return 0;return s.map(({start:t,end:n})=>n-t).reduce((t,n)=>t+n,0)/s.length},e.isALTEnabled=function(){return t.default.getBootstrap('pps_web_enable_alt')},e.measureAdditionalLoadTime=function(t,n){u(o(t,n)).forEach(({start:t,end:n})=>performance.measure('ALT',{start:t,end:n}))};var t=babelHelpers.interopRequireDefault(r(d[0]));const n=new Set(['fetch','xmlhttprequest','script','css','link']),s=new Set(['/tracking/jitney/logging/messages','/api/v2/marketing_event_tracking']);function o(t,o){return t.filter(t=>{if('number'!=typeof o||t.startTime<o)return!1;if(t.duration<50)return!1;if(!n.has(t.initiatorType))return!1;const{pathname:u}=new URL(t.name);return!s.has(u)})}function u(t){const n=t.sort((t,n)=>t.startTime-n.startTime),s=[];return n.forEach(({startTime:t,responseEnd:n})=>{const o=s[s.length-1];!o||t>o.end?s.push({start:t,end:n}):o.end=Math.max(o.end,n)}),s}}),"7522e1",["6b945b"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),s=babelHelpers.interopRequireDefault(r(d[1])),n=r(d[2]),o=r(d[3]),l=r(d[4]),c=babelHelpers.interopRequireDefault(r(d[5])),h=r(d[6]),u=r(d[7]),p=r(d[8]),b=r(d[9]),f=babelHelpers.interopRequireDefault(r(d[10])),v=r(d[11]),T=r(d[12]);const M=new Set(['click','input','keypress']);class y{constructor({isDirectRequest:O,pageCreatedAt:P}){this.networkInformation=(0,u.getNetworkInformation)(),this.initialVisibilityState=(0,c.default)(),this.isDirectRequest=void 0,this.isClientSideRequest=void 0,this.performance=(0,s.default)(),this.createdAt=void 0,this.pageRequestMethod=1,this.domainAndPath=`${window.location.host}${window.location.pathname}`,this.recorderController=void 0,this.throttleableMetrics={longTasks:[],interactivitySpans:[],interactivitySpanAggregations:{}},this.unthrottleableMetrics={assets:{},longInputDelays:[],longInputDelayCounts:[],numberOfLongInputDelays:0,timedInteractions:[],totalDurationOfLongInputDelays:0,resources:[]},this.paintObserver=void 0,this.longTaskObserver=void 0,this.inputDelayObserver=void 0,this.timedInteractionObserver=void 0,this.resourcesObserver=void 0,this.clsObserver=void 0,this.lcpObserver=void 0,this.retired=!1,this.isDev=!1,this.universalPageName=void 0,this.subPageName=void 0,this.impressionUuid=void 0,this.eventData=void 0,this.eventDataSchema=void 0,this.showLogs=(0,n.getTreatmentOverride)('pps'),this.retire=async()=>{var t;if(!this.retired){var s,n;if(this.retired=!0,this.cleanUpLongTasks(),this.cleanupLongInputDelayObserver(),this.cleanupTimedInteractionObserver(),this.cleanUpResources(),this.cleanUpClsObserver(),this.cleanUpPaintObserver(),this.cleanUpLcpObserver(),this.recordStylesheetRuleLength(),this.throttleableMetrics.recorderDuration=this.performance.now()-this.createdAt,this.throttleableMetrics.timeToHydrate=this.calculateTimeToHydrate(),this.hasNecessaryPolyfills())window.perfMetrics.stopSearchingForFirstMeaningfulPaint(),null===(s=(n=window.perfMetrics).stopSearchingForLargestContentfulPaint)||void 0===s||s.call(n);null===(t=this.recorderController)||void 0===t||t.abort(),this.recorderController=void 0}},this.getDataProblems=()=>{const{ttfcp:t,ttfmp:s}=this.throttleableMetrics,n=[],o=[];return t&&t<0&&n.push('ttfcp-negative'),t&&t>6e4&&n.push('ttfcp-exceeds-60s'),s||o.push('ttfmp-not-found'),{problems:n,warnings:o}},this.readCalculatedMetrics=()=>{const t=this.calculateTimeToHydrate();return{tbt:(0,p.calculateTotalBlockingTime)(this.throttleableMetrics),tbtPreHydrate:(0,p.calculateTbtPreHydrate)(this.throttleableMetrics,t),tbtPostHydrate:(0,p.calculateTbtPostHydrate)(this.throttleableMetrics,t),timeToHydrate:t,numberOfBlockingTasks:(0,p.calculateNumberOfBlockingTasks)(this.throttleableMetrics),longestBlockingTime:(0,p.calculateLongestBlockingTaskIndex)(this.throttleableMetrics),longestBlockingTaskIndex:(0,p.calculateLongestBlockingTaskIndex)(this.throttleableMetrics),...(0,b.isALTEnabled)()&&{alt:(0,b.calculateAdditionalLoadTime)(this.unthrottleableMetrics.resources,this.throttleableMetrics.ttfcp)}}},this.gatherUnthrottleableMetrics=()=>{this.listenForResources(),this.listenForCLS(),this.listenForLongInputDelays(),this.listenForTimedInteractions()},this.gatherThrottleableMetrics=()=>{this.isDirectRequest&&this.observeFCP(),this.listenForFMP(),this.listenForFID(),this.listenForLongTasks(),this.listenForLCP(),this.listenForAutoFMP(),this.throttleableMetrics.webPerformanceTiming={...(0,u.getWWWCdnProvider)(),...this.isDirectRequest&&(0,u.getWebPerformanceTiming)()}},this.isRecordingLoggable=()=>void 0!==this.throttleableMetrics.ttfcp,this.observeFCP=()=>{if(!this.isClientSideRequest&&this.supportsPerformanceObserverWithType('paint'))try{this.paintObserver=new PerformanceObserver(t=>{t.getEntries().forEach(this.setTtfcpDirectFromEntry)}),this.paintObserver.observe({type:'paint',buffered:!0}),(0,l.isWebSafari)()&&this.performance.getEntriesByType('paint').forEach(this.setTtfcpDirectFromEntry)}catch(t){}},this.setTtfcpDirectFromEntry=t=>{'first-contentful-paint'===t.name&&(this.setTtfcpClientFromTimestamp(t.startTime),this.showLogs&&this.consoleLogMetrics())},this.cleanUpPaintObserver=()=>{this.paintObserver&&('function'==typeof this.paintObserver.takeRecords&&this.paintObserver.takeRecords().forEach(this.setTtfcpDirectFromEntry),this.paintObserver.disconnect())},this.setTtfcpClientFromTimestamp=t=>{this.retired||this.throttleableMetrics.ttfcp||(this.throttleableMetrics.ttfcp=t-this.createdAt,this.isClientSideRequest&&(this.performance.mark('TTFCP_END'),this.performance.measure('TTFCP',"CSR_PAGE_START",'TTFCP_END')),this.showLogs&&this.consoleLogMetrics())},this.listenForFMP=()=>{this.retired||(this.isClientSideRequest&&window.perfMetrics.startSearchingForFirstMeaningfulPaint(),window.perfMetrics.onFirstMeaningfulPaint(this.setTTFMP))},this.setTTFMP=t=>{(0,o.dispatchEvent)('TTFMP'),this.retired||(this.throttleableMetrics.ttfmp=t-this.createdAt,this.throttleableMetrics.ttfmpTarget=document.getElementById(v.FMP_TARGET_ID),this.isClientSideRequest&&(this.performance.mark('TTFMP_END'),this.performance.measure('TTFMP',"CSR_PAGE_START",'TTFMP_END')),this.showLogs&&this.consoleLogMetrics())},this.listenForAutoFMP=()=>{var t,s;if(!this.retired){var n,o,l,c,h,u;if(this.isClientSideRequest)null===(n=(o=window.perfMetrics).startSearchingForLargestContentfulPaint)||void 0===n||n.call(o);else null===(l=(c=window.perfMetrics).stopPollingForLargestContentfulPaint)||void 0===l||l.call(c),null===(h=(u=window.perfMetrics).markIsHydratedForLargestContentfulPaint)||void 0===h||h.call(u);null===(t=(s=window.perfMetrics).onLargestContentfulPaint)||void 0===t||t.call(s,this.setAutoTTFMP)}},this.setAutoTTFMP=(t,s)=>{this.retired||(this.throttleableMetrics.autoTTFMP=Math.max(0,t-this.createdAt),this.throttleableMetrics.autoTTFMPTarget=s,this.showLogs&&this.consoleLogMetrics())},this.listenForFID=()=>{window.perfMetrics.clearFirstInputDelay(),window.perfMetrics.onFirstInputDelay(this.setFID)},this.setFID=(t,s)=>{if(this.retired)return;this.throttleableMetrics.fid=t;const n=s.timeStamp-this.createdAt;n>=0&&(this.throttleableMetrics.timeToFid=n),this.showLogs&&this.consoleLogMetrics()},this.listenForTimedInteractions=()=>{if(this.supportsPerformanceObserverWithType('element')){this.cleanupTimedInteractionObserver(),this.timedInteractionObserver=new PerformanceObserver(t=>{y.lastInputDelayEvent&&(t.getEntries().forEach(t=>{this.recordTimedInteraction(t)}),y.lastInputDelayEvent=void 0)});try{this.timedInteractionObserver.observe({type:'element',buffered:this.isDirectRequest})}catch(t){}}},this.recordTimedInteraction=t=>{const s=y.lastInputDelayEvent;if(!s)return;const{element:n,identifier:o,name:l,renderTime:c}=t,h={element_type:'image-paint'===l?'image':'text',identifier_type:o,previous_target_ancestor_section_id:s.target_ancestor_section_id,start_time:s.start_time,target_ancestor_section_id:this.findAncestorSectionId(n),total_time:Math.round(c-s.start_time)};this.unthrottleableMetrics.timedInteractions.push(h)},this.cleanupTimedInteractionObserver=()=>{if(!this.timedInteractionObserver)return;'function'==typeof this.timedInteractionObserver.takeRecords&&this.timedInteractionObserver.takeRecords();const{timedInteractions:t}=this.unthrottleableMetrics;this.unthrottleableMetrics.timedInteractions=t.slice(0,20),this.timedInteractionObserver.disconnect()},this.listenForLongInputDelays=()=>{if(this.supportsPerformanceObserverWithType('event')){this.inputDelayObserver=new PerformanceObserver(t=>{let s;t.getEntries().forEach(t=>{this.recordLongInputDelay(t),M.has(t.name)&&(s=t)}),s&&(y.lastInputDelayEvent=this.createLongInputRecord(s))});try{this.inputDelayObserver.observe({type:'event',buffered:this.isDirectRequest})}catch(t){}}},this.createLongInputRecord=t=>{const{duration:s,name:n,processingEnd:o,processingStart:l,startTime:c,target:h}=t,u=l-c;return{input_delay:Math.round(u),input_duration:s,event_type:n,start_time:Math.round(c),target_ancestor_section_id:this.findAncestorSectionId(h),total_time:Math.round(o-c)}},this.recordLongInputDelay=t=>{const{name:s,processingStart:n,startTime:o}=t;if(!M.has(s))return;if(n-o<100)return;const l=this.createLongInputRecord(t);this.unthrottleableMetrics.longInputDelays.push(l)},this.cleanupLongInputDelayObserver=()=>{if(!this.inputDelayObserver)return;'function'==typeof this.inputDelayObserver.takeRecords&&this.inputDelayObserver.takeRecords();let t=0;const s=new Map;this.unthrottleableMetrics.longInputDelays.forEach(({event_type:n,total_time:o})=>{t+=o;let l=s.get(n);l||(l={event_count:0,total_duration:0,event_name:n},s.set(n,l)),l.event_count+=1,l.total_duration+=o}),this.unthrottleableMetrics.longInputDelayCounts=Array.from(s.values()),this.unthrottleableMetrics.numberOfLongInputDelays=this.unthrottleableMetrics.longInputDelays.length,this.unthrottleableMetrics.totalDurationOfLongInputDelays=t,this.unthrottleableMetrics.longInputDelays=this.unthrottleableMetrics.longInputDelays.sort((t,s)=>s.total_time-t.total_time).slice(0,20),this.inputDelayObserver.disconnect()},this.listenForLongTasks=()=>{if(this.supportsPerformanceObserverWithType('longtask'))try{this.longTaskObserver=new PerformanceObserver(t=>{this.throttleableMetrics.longTasks.push(...t.getEntries())}),this.longTaskObserver.observe({type:'longtask',buffered:this.isDirectRequest})}catch(t){}},this.cleanUpLongTasks=()=>{this.longTaskObserver&&('function'==typeof this.longTaskObserver.takeRecords&&this.throttleableMetrics.longTasks.push(...this.longTaskObserver.takeRecords()),this.throttleableMetrics.totalBlockingTime=(0,p.calculateTotalBlockingTime)(this.throttleableMetrics),this.showLogs&&this.consoleLogMetrics(),this.throttleableMetrics.longestBlockingTime=(0,p.calculateLongestBlockingTime)(this.throttleableMetrics),this.throttleableMetrics.longestBlockingTaskIndex=(0,p.calculateLongestBlockingTaskIndex)(this.throttleableMetrics),this.throttleableMetrics.tbtPreHydrate=(0,p.calculateTbtPreHydrate)(this.throttleableMetrics,this.calculateTimeToHydrate()),this.throttleableMetrics.tbtPostHydrate=(0,p.calculateTbtPostHydrate)(this.throttleableMetrics,this.calculateTimeToHydrate()),this.throttleableMetrics.numberOfBlockingTasks=(0,p.calculateNumberOfBlockingTasks)(this.throttleableMetrics),this.throttleableMetrics.interactivitySpans=(0,T.getInteractivitySpans)({start:this.createdAt,end:this.performance.now()}).map(t=>({name:t.name,duration:t.end-t.start,...(0,p.calculateInteractivityMetricsInInterval)(this.throttleableMetrics,t)})),this.throttleableMetrics.interactivitySpanAggregations=(0,T.aggregateInteractivitySpans)(this.throttleableMetrics.interactivitySpans),this.longTaskObserver.disconnect())},this.calculateTimeToHydrate=()=>{const t=[...this.performance.getEntriesByName(v.HYDRATE_PERFORMANCE_HOC_MARK),...this.performance.getEntriesByName(v.HYDRATE_MEANINGFUL_ELEMENT_MARK)].filter(t=>t.startTime>this.createdAt);if(0!==t.length)return t.reduce((t,s)=>t.startTime<s.startTime?t:s,t[0]).startTime-this.createdAt},this.listenForCLS=()=>{if(this.supportsPerformanceObserverWithType('layout-shift'))try{this.clsObserver=new PerformanceObserver(this.clsObserverCallback),this.unthrottleableMetrics.cumulativeLayoutShift=0,this.clsObserver.observe({type:'layout-shift',buffered:this.isDirectRequest})}catch(t){}},this.clsObserverCallback=t=>{t.getEntries().forEach(t=>{t.hadRecentInput||(this.unthrottleableMetrics.cumulativeLayoutShift=this.unthrottleableMetrics.cumulativeLayoutShift||0,this.unthrottleableMetrics.cumulativeLayoutShift+=t.value,this.showLogs&&this.consoleLogMetrics())})},this.cleanUpClsObserver=()=>{this.clsObserver&&('function'==typeof this.clsObserver.takeRecords&&this.clsObserver.takeRecords(),this.clsObserver.disconnect())},this.listenForResources=()=>{if(this.supportsPerformanceObserverWithType('resource'))try{this.resourcesObserver=new PerformanceObserver(t=>{this.unthrottleableMetrics.resources.push(...t.getEntries())}),this.resourcesObserver.observe({type:'resource',buffered:this.isDirectRequest})}catch(t){}},this.cleanUpResources=()=>{this.resourcesObserver&&('function'==typeof this.resourcesObserver.takeRecords&&this.unthrottleableMetrics.resources.push(...this.resourcesObserver.takeRecords()),this.unthrottleableMetrics.assets=(0,f.default)({resources:this.unthrottleableMetrics.resources,universalPageName:this.universalPageName}),(0,b.isALTEnabled)()&&(this.throttleableMetrics.alt=(0,b.calculateAdditionalLoadTime)(this.unthrottleableMetrics.resources,this.throttleableMetrics.ttfcp),(0,b.measureAdditionalLoadTime)(this.unthrottleableMetrics.resources,this.throttleableMetrics.ttfcp)),this.resourcesObserver.disconnect())},this.recordStylesheetRuleLength=()=>{let t=0,s=0;if(document.styleSheets){for(let n=0;n<document.styleSheets.length;n++)try{document.styleSheets[n].href?s+=document.styleSheets[n].rules.length:t+=document.styleSheets[n].rules.length}catch(t){}this.unthrottleableMetrics.inlineStylesheetRules=t,this.unthrottleableMetrics.externalStylesheetRules=s}},this.listenForLCP=()=>{if(!this.isClientSideRequest&&this.supportsPerformanceObserverWithType('largest-contentful-paint'))try{this.lcpObserver=new PerformanceObserver(t=>{t.getEntries().forEach(this.updateLCP)}),this.lcpObserver.observe({type:'largest-contentful-paint',buffered:!0})}catch(t){}},this.updateLCP=t=>{this.throttleableMetrics.lcp=t.startTime,this.throttleableMetrics.lcpTarget=t.element},this.cleanUpLcpObserver=()=>{this.lcpObserver&&('function'==typeof this.lcpObserver.takeRecords&&this.lcpObserver.takeRecords().forEach(this.updateLCP),this.lcpObserver.disconnect())},this.supportsPerformanceObserverWithType=t=>'undefined'!=typeof PerformanceObserver&&(!!PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(t)),this.findAncestorSectionId=t=>{let s=null,n=t;for(;null===s&&n;)s=n.getAttribute('data-section-id')||n.getAttribute('data-testid'),n=n.parentElement;return s||void 0},this.hasNecessaryPolyfills=()=>!!window.perfMetrics,this.consoleLogMetrics=()=>{const{ttfcp:t,ttfmp:s,totalBlockingTime:n,fid:o,lcp:l,autoTTFMP:c,alt:h}=this.throttleableMetrics,{cumulativeLayoutShift:u}=this.unthrottleableMetrics;console.log(`Page Performance Score metrics (air.bb/web-pps)\n\nPathname = %c${window.location.pathname}%c\n  Time To First Contentful Paint = ${this.prettyMetric({metric:t})}\n  Time To First Meaningful Paint = ${this.prettyMetric({metric:s})}\n  First Input Delay              = ${this.prettyMetric({metric:o,isFid:!0})}\n  Total Blocking Time            = ${this.prettyMetric({metric:n,isTbt:!0})}\n  Cumulative Layout Shift        = ${this.prettyMetric({metric:u,isCls:!0})}\n\nExperimental metrics\n  LCP                            = ${this.prettyMetric({metric:l})}\n  Auto TTFMP                     = ${this.prettyMetric({metric:c})}\n  Additional Load Time           = ${this.prettyMetric({metric:h,isAlt:!0})}`,'font-weight: bold;','')},this.prettyMetric=({metric:t,isFid:s,isTbt:n,isCls:o,isAlt:l})=>{let c='';return c=o?(t||0).toFixed(2):t?Math.round(t).toLocaleString()+" ms":'...',c=c.padStart(9,' '),s&&void 0===t&&(c+=" (click to see)"),n&&void 0===t&&(c+=" (background tab to calculate)"),l&&void 0===t&&(c+=" (background tab to calculate)"),c},this.isDirectRequest=O,this.isClientSideRequest=!O,O?this.createdAt=0:(this.performance.mark("CSR_PAGE_START",{startTime:P}),this.createdAt=P||this.performance.now()),(0,h.getPageRequestMethod)(this.isClientSideRequest).then(t=>{this.pageRequestMethod=t}),this.isClientSideRequest?this.unthrottleableMetrics.documentAge=0:t.default.get('pageGeneratedAt')&&(this.unthrottleableMetrics.documentAge=Math.max(Date.now()-t.default.get('pageGeneratedAt'),0)),this.gatherUnthrottleableMetrics(),2!==this.initialVisibilityState&&this.hasNecessaryPolyfills()&&this.gatherThrottleableMetrics()}}e.default=y,y.lastInputDelayEvent=void 0}),"7ba774",["05b07c","be93ab","597519","14eddd","c03a13","dcb1c5","b5448d","aee773","695adb","7522e1","d579db","8f7de0","6cda14"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(t,c,n){const f=Math.log(t),o=Math.log(c/t),u=Math.sqrt(1-3*o-Math.sqrt((o-3)*(o-3)-8))/2;return(1-(function(t){const c=t<0?-1:1,n=1/(1+.3275911*(t=Math.abs(t)));return c*(1-n*(.254829592+n*(n*(1.421413741+n*(1.061405429*n-1.453152027))-.284496736))*Math.exp(-t*t))})((Math.log(n)-f)/(Math.SQRT2*u)))/2}Object.defineProperty(e,"__esModule",{value:!0}),e.calculatePagePerformanceScore=function(c){const n=(function({ttfcp:c,ttfmp:n,tbt:f,fid:o,cls:u}){return{ttfcp:t(2500,.08491351406,c||0),ttfmp:t(3e3,244.5719961,n||0),fid:t(170,.6089337333,o||0),tbt:t(1250,167.2687485,f||0),cls:t(.15,1.889923697e-7,u||0)}})(c);return.35*n.ttfcp+.15*n.ttfmp+.3*n.fid+.15*n.tbt+.05*n.cls}}),"7c8981",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HYDRATE_PERFORMANCE_HOC_MARK=e.HYDRATE_MEANINGFUL_ELEMENT_MARK=e.FMP_TARGET_ID=void 0;e.FMP_TARGET_ID='FMP-target';e.HYDRATE_MEANINGFUL_ELEMENT_MARK='hydrate-meaningful-element';e.HYDRATE_PERFORMANCE_HOC_MARK='hydrate-performance-hoc'}),"8f7de0",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNetworkInformation=function(){if(window.navigator&&window.navigator.connection){const{connection:t}=window.navigator;return{effective_type:t.effectiveType,rtt:t.rtt,downlink:t.downlink}}return},e.getWWWCdnProvider=function(){return{www_cdn_provider:t.default.get('wwwCdnProvider')||'Unknown'}},e.getWebPerformanceTiming=function(){if(window.performance&&window.performance.timing){const{navigationStart:t,redirectStart:n,redirectEnd:_,fetchStart:o,domainLookupStart:s,domainLookupEnd:c,connectStart:u,connectEnd:v,secureConnectionStart:w,requestStart:f,responseStart:p,responseEnd:l,domLoading:E,domInteractive:S,domContentLoadedEventStart:k,domContentLoadedEventEnd:C,domComplete:L,loadEventStart:b,loadEventEnd:P}=window.performance.timing;return{navigation_start_timestamp_in_ms:t,time_to_redirect_start_in_ms:n,time_to_redirect_end_in_ms:_,time_to_fetch_start_in_ms:o,time_to_domain_lookup_start_in_ms:s,time_to_domain_lookup_end_in_ms:c,time_to_connect_start_in_ms:u,time_to_connect_end_in_ms:v,time_to_secure_connection_start_in_ms:w,time_to_request_start_in_ms:f,time_to_response_start_in_ms:p,time_to_response_end_in_ms:l,time_to_dom_loading_in_ms:E,time_to_dom_interactive_in_ms:S,time_to_dom_content_loaded_event_start_in_ms:k,time_to_dom_content_loaded_event_end_in_ms:C,time_to_dom_complete_in_ms:L,time_to_load_event_start_in_ms:b,time_to_load_event_end_in_ms:P}}};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"aee773",["05b07c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPageRequestMethod=function(n){return(function(){const{navigator:t}=window;return void 0===t?Promise.resolve(!1):'serviceWorker'in t&&t.serviceWorker.getRegistration?t.serviceWorker.getRegistration('/').then(t=>!(!t||!t.active)).catch(()=>!1):Promise.resolve(!1)})().then(n=>{if(!n)return!1;const s=g.window&&(0,o.default)();if(!s||!s.getEntriesByType)return!1;const l=s.getEntriesByType('navigation');if(!l||0===l.length)return t.default.get('isServiceWorkerAppShell');const c=l[0].serverTiming;return!(!c||0===c.length)&&c.filter(t=>'serviceWorker'===t.name).length>0}).catch(()=>!1).then(t=>n?Promise.resolve(2):t?Promise.resolve(4):1===l?Promise.resolve(5):Promise.resolve(1))};var t=babelHelpers.interopRequireDefault(r(d[0])),n=babelHelpers.interopRequireDefault(r(d[1])),o=babelHelpers.interopRequireDefault(r(d[2])),s=r(d[3]);let l;!(function(){if((0,n.default)())return;const c=Date.now(),{tracking_context:u=null}=t.default.get('layout-init')||{};if(u&&u.action&&['app_shell','sw_skeleton'].some(t=>u.action.includes(t)))return;const v=c-(t.default.get('pageGeneratedAt')||c)>6e5;l=v?1:3;const f=g.window&&(0,o.default)();let p=3;if(f&&f.getEntriesByType){const t=f.getEntriesByType('navigation');if(t&&t.length>0){var h;const n=null===(h=t[0].serverTiming)||void 0===h?void 0:h.find(t=>'cdn-cache'===t.name);'HIT'===(null==n?void 0:n.description)?p=1:'MISS'===(null==n?void 0:n.description)&&(p=2)}}3!==p&&(l=p),(0,s.airdogCount)('cache_state_comparison',1,{pageAgeLooksCached:String(v),serverTimingCacheState:String(p)})})()}),"b5448d",["05b07c","6f9d08","be93ab","08b665"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(){const t=r(d[1]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.PageTransitionCoordinator=void 0;var s=babelHelpers.interopRequireDefault(r(d[2])),o=r(d[3]),u=r(d[4]),h=babelHelpers.interopRequireDefault(r(d[5])),c=r(d[6]),l=r(d[7]),p=babelHelpers.interopRequireDefault(r(d[8])),f=babelHelpers.interopRequireDefault(r(d[9]));function P(t){if(!t)return;return Object.keys(n().PageName).find(s=>n().PageName[s]===t)}class v{constructor({isResetPageEventsEnabled:n,trackingModule:s}){this.trackingModule=void 0,this.performanceRecorders=[],this.ignorePathnameUpdate=void 0,this.includeHistoryUpdate=void 0,this.nextPageCreatedAt=void 0,this.resetPageEvents=void 0,this.pauseInfo={pauseStart:0,pauseDuration:0,pausePending:!1},this.currentPathname='',this.currentSearch='',this.setReadMetricsFromPerformanceRecorder=()=>{window.__readMetricsFromPerformanceRecorder=()=>this.performanceRecorders.map(t=>{if(!t.isRecordingLoggable())return;const n=P(t.universalPageName),s=P(t.subPageName),o={...t.readCalculatedMetrics(),ttfcp:t.throttleableMetrics.ttfcp,ttfmp:t.throttleableMetrics.ttfmp,auto_ttfmp:t.throttleableMetrics.autoTTFMP,fid:t.throttleableMetrics.fid,timeToFid:t.throttleableMetrics.timeToFid,cls:t.unthrottleableMetrics.cumulativeLayoutShift,lcp:t.throttleableMetrics.lcp,createdAt:t.createdAt,pageRequestMethod:t.pageRequestMethod},u=(0,l.calculatePagePerformanceScore)(o);return{...o,pageName:n,subPageName:s,score:u}}).filter(t=>!!t)},this.updateCurrentRecorderWithHOCProps=t=>{const n=this.performanceRecorders[this.performanceRecorders.length-1];n&&(n.universalPageName=t.universalPageName,n.subPageName=t.subPageName,n.impressionUuid=t.impressionUuid,n.eventData=t.eventData,n.eventDataSchema=t.eventDataSchema,n.isDirectRequest||n.setTtfcpClientFromTimestamp(t.timestampOfFCP))},this.handleNewHistory=t=>{t.listen(this.onHistoryChange)},this.setIgnorePathnameUpdate=t=>{this.ignorePathnameUpdate=t},this.clearIgnorePathnameUpdate=()=>{this.ignorePathnameUpdate=void 0},this.setIncludeHistoryUpdate=t=>{this.includeHistoryUpdate=t},this.clearIncludeHistoryUpdate=()=>{this.includeHistoryUpdate=void 0},this.startNextPageTimer=()=>{this.nextPageCreatedAt=(0,h.default)().now(),this.pauseInfo.pausePending=!1,this.pauseInfo.pauseStart=0,this.pauseInfo.pauseDuration=0},this.pauseNextPageTimer=()=>{this.pauseInfo.pausePending=!0,this.pauseInfo.pauseStart=(0,h.default)().now()},this.resumeNextPageTimer=()=>{this.pauseInfo.pausePending?(this.pauseInfo.pausePending=!1,this.pauseInfo.pauseDuration+=(0,h.default)().now()-this.pauseInfo.pauseStart,this.pauseInfo.pauseStart=0):(0,o.airdogCount)('page_transition_coordinator.page_timer.error',1,['error:pause',"pathname:"+window.location.pathname])},this.createNewRecorder=({isDirectRequest:t})=>{const n=this.performanceRecorders[this.performanceRecorders.length-1];n&&n.retire(),this.resetPageEvents&&!t&&c.delays.resetPageEvents();const s=this.getNextPageCreatedAt();this.performanceRecorders.push(new p.default({isDirectRequest:t,pageCreatedAt:s}))},this.getNextPageCreatedAt=()=>{let t;return this.nextPageCreatedAt&&this.pauseInfo.pauseDuration?t=this.nextPageCreatedAt+this.pauseInfo.pauseDuration:this.pauseInfo.pausePending?((0,o.airdogCount)('page_transition_coordinator.page_timer.error',1,['error:resume',"pathname:"+window.location.pathname]),t=this.nextPageCreatedAt):this.nextPageCreatedAt&&(t=this.nextPageCreatedAt),this.nextPageCreatedAt=void 0,t},this.onHistoryChange=(t,n)=>{const s=t.pathname,o=t.search;this.isPageTransition({action:n,prevPathname:this.currentPathname,prevSearch:this.currentSearch,nextPathname:s,nextSearch:o})&&(this.flushAllEvents({triggeringAction:n}),this.createNewRecorder({isDirectRequest:!1})),this.currentPathname=s,this.currentSearch=o},this.isPageTransition=t=>{if('function'==typeof this.includeHistoryUpdate)return this.includeHistoryUpdate(t);const{action:n,prevPathname:s,nextPathname:o}=t;return!(!s||!o)&&(s!==o&&(('function'!=typeof this.ignorePathnameUpdate||!this.ignorePathnameUpdate({prevPathname:s,nextPathname:o,action:n}))&&['POP','PUSH','REPLACE'].includes(n)))},this.flushAllEvents=({triggeringAction:n}={})=>{var s;(0,u.isBot)()||(this.performanceRecorders.forEach(s=>{var u;if(s.retired||s.retire(),!s.isRecordingLoggable())return void(0,o.airdogCount)('page_transition_coordinator.rogue_recorder',1,{duration:s.throttleableMetrics.recorderDuration,url:s.domainAndPath,isClientSideRequest:s.isClientSideRequest,isDirectRequest:s.isDirectRequest});const{problems:h,warnings:c}=s.getDataProblems();'REPLACE'!==n||s.throttleableMetrics.fid||c.push('probable-redirect');const l=["pathname:"+window.location.pathname,"pagename:"+P(s.universalPageName),"subpage_name:"+P(s.subPageName),"page_request_method:"+s.pageRequestMethod];c.length>0&&(0,o.airdogCount)('page_transition_coordinator.data.warning',1,['error:data-warning',...l,...c.map(t=>`warning_${t}:true`)]),h.length>0?(0,o.airdogCount)('page_transition_coordinator.data.error',1,['error:data-problems',...l,...h.map(t=>`problem_${t}:true`)]):null===(u=this.trackingModule)||void 0===u||u.queueJitneyEvent({schema:t().PerformanceWebPageMetricsEvent,event_data:(0,f.default)(s)})}),this.performanceRecorders=[],null===(s=this.trackingModule)||void 0===s||s.getLogger().flushEventQueue())},this.setPageCloseHandlers=()=>{window.addEventListener('beforeunload',()=>this.flushAllEvents(),!0),window.addEventListener('visibilitychange',()=>{'hidden'===document.visibilityState&&this.flushAllEvents()}),(0,u.isSafari)()&&window.addEventListener('pagehide',()=>this.flushAllEvents())},this.currentPathname=window.location.pathname,this.currentSearch=window.location.search,this.resetPageEvents=null==n||n,this.createNewRecorder({isDirectRequest:!0}),this.trackingModule=s,this.setPageCloseHandlers(),this.setReadMetricsFromPerformanceRecorder()}}e.PageTransitionCoordinator=v;var R=new v({trackingModule:s.default});e.default=R}),"c323ce",["39b0bd","b5b294","4cdbd9","08b665","c03a13","be93ab","8e179e","7c8981","7ba774","4e0da4"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({resources:s,universalPageName:c}){var l,u,h,f,y;if(0===s.length||s.length>0&&void 0===s[0].decodedBodySize)return;const p=['link','img','css','script','other'],_=[{type:'css',initiatorList:['link'],regex:/^.+(muscache|localhost).+\.css(\?.*)?$/},{type:'img',initiatorList:['img','css','link'],regex:/^.+(muscache|localhost).+(jpg|jpeg|png|gif|webp)(\?.*)?$/},{type:'js',category:'airbnb',initiatorList:['link','script'],regex:/^.+(muscache|localhost).+\.m?(js|bundle)(\?.*)?$/},{type:'js',category:'third_party',initiatorList:['link','script'],regex:/^((?!(muscache|localhost)).)*\.m?js(\?.*)?$/},{type:'font',initiatorList:['link','css','other'],regex:/^.+(muscache|localhost).+\.woff2(\?.*)?$/}],v={css:{...n},js:{airbnb:{...n},third_party:{...n}},img:{...n},font:{...n}},b=[],j=t.default.getBootstrap('instrument_search_results_images');var z,k;s.filter(({initiatorType:t})=>p.includes(t)).forEach(({duration:t,name:n,initiatorType:s,decodedBodySize:l,transferSize:u,encodedBodySize:h})=>{_.find(({type:f,initiatorList:y,regex:p,category:_})=>{if(y.includes(s)&&n.match(p)){const s=_?v[f][_]:v[f];if(j&&'img'===f&&2e3===c&&Math.random()<=.001){const s=(0,o.createJitneyPropsForImageResource)({duration:t,encodedBodySize:h,name:n,transferSize:u});s&&b.push(s)}const y=s.count*s.cache_hit_ratio+(0===u?1:0);return s.count+=1,s.cache_hit_ratio=y?y/s.count:0,s.transfer_size+=u,s.encodedbody_size+=h,s.decodedbody_size+=l,!0}return!1})}),v.css=null!==(l=v.css)&&void 0!==l&&l.count?v.css:void 0,null!==(u=v.js)&&void 0!==u&&null!==(h=u.airbnb)&&void 0!==h&&h.count?0===(null===(z=v.js)||void 0===z||null===(k=z.third_party)||void 0===k?void 0:k.count)&&(v.js.third_party.cache_hit_ratio=1):v.js=void 0;v.img=null!==(f=v.img)&&void 0!==f&&f.count?v.img:void 0,v.font=null!==(y=v.font)&&void 0!==y&&y.count?v.font:void 0,j&&b.length&&(0,o.sendJitneyEventsForImages)(b);if(!Object.values(v).find(t=>!!t))return;return v};var t=babelHelpers.interopRequireDefault(r(d[0])),o=r(d[1]);const n={transfer_size:0,encodedbody_size:0,decodedbody_size:0,count:0,cache_hit_ratio:0}}),"d579db",["6b945b","21b302"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){switch(document.visibilityState){case'visible':return 1;case'hidden':return 2;case'prerender':return 3;default:return 4}}}),"dcb1c5",[]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/5ade.04360be375.js.map