__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=JSON.parse("{\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"mutation\",\"name\":{\"kind\":\"Name\",\"value\":\"GetMediaUploadUrl\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"listingId\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Long\"}}},\"directives\":[]},{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"fileExtension\"}},\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"MisoMediaUploadSignedUrlFileExtension\"}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"miso\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"__typename\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"mediaUploadSignedUrl\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"request\"},\"value\":{\"kind\":\"ObjectValue\",\"fields\":[{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"listingId\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"listingId\"}}},{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"fileExtension\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"fileExtension\"}}}]}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"__typename\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"filePath\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"signedUrl\"},\"arguments\":[],\"directives\":[]}]}}]}}]}}],\"operationType\":\"MUTATION\"}");n.operationId="59573a00a3401ea7306126375f9cf5abbc8c2273ffd1ec3ee138544df4a6b9b0",n.integrityHash="ff92978ac85ad49d9c520ec1c7a240cc1c969140d937ef0eb0b78aa308325e25";var t=n;e.default=t}),"062787",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addNewListingCoverPhoto=function({filePath:t}){return(o,_)=>{const{listingDetails:s}=_(),{listingId:l}=s,h={listing_id:l,new_listing_photo:{image_path:t}};return Promise.resolve(n.default.post("/v2/add_listing_photo/"+l,{data:h})).then(({listing_photos:t})=>{const _=t.filter(t=>t.listing_id_str===l),{id:s,is_cover_eligible:h}=_[_.length-1];h||Promise.reject(Error("Image isn't eligable for cover photo"));const u={listing_id:l,make_cover_photo_id:s};return n.default.put("/v2/update_listing_photos/"+l,{data:u}).then(({listing_photos:t})=>{o({type:p.UPDATE_COVER_PHOTO_SUCCESS,payload:t})}).catch(()=>{o({type:p.UPDATE_COVER_PHOTO_FAILURE})})})}},e.addNewPhoto=function({media:o,destListingId:_,destFacilityId:s,sendGPS:l}){return h=>o.filePath?(l?t.default.gps(o.picture.file).catch(()=>{}):Promise.resolve(void 0)).then(t=>{const l=t?{lat:t.latitude,lng:t.longitude}:{},u={listing_id:_,new_listing_photo:{image_path:o.filePath,...o.uploadedAt?{image_uploaded_at:o.uploadedAt}:{},...o.fileSize?{image_file_size:o.fileSize}:{},...o.imageWidth?{image_width:o.imageWidth}:{},...o.imageHeight?{image_height:o.imageHeight}:{},...s?{room_id:s}:{},...l}};return Promise.all([h({type:p.ADD_PHOTO_REQUEST}),n.default.post("/v2/add_listing_photo/"+_,{data:u}).then(({listing_photos:t})=>(h({type:p.ADD_PHOTO_REQUEST_SUCCESS,payload:t}),t)).catch(()=>{h({type:p.ADD_PHOTO_REQUEST_FAILURE})})])}):Promise.reject()},e.appendLocalMediaItem=function(t,o){return{type:p.APPEND_LOCAL_MEDIA_ITEM,payload:{mediaKey:t,mediaItem:o}}},e.changeRoom=function({listingId:t,roomId:o,photoIds:_}){return s=>{s({type:p.CHANGE_ROOM_START,payload:{roomId:o,photoIds:_}});const l={data:{destination:{listing_id:t,room_id:o},photosToMove:_.map(o=>({listing_id:t,picture_id:o}))}};return n.default.post("/v2/move_listing_photos",l).then(({success_count:o,listing_photos:n})=>{if(o===_.length)return s({type:p.CHANGE_ROOM_SUCCESS,payload:{listingPhotos:n[t],photoIds:_,listingId:t}}),n[t]}).catch(t=>{throw s({type:p.CHANGE_ROOM_FAILED,payload:{photoIds:_}}),t})}},e.clearEditedPhotoIds=function(){return{type:p.CLEAR_EDITED_PHOTO_IDS}},e.deletePhoto=function({photoId:t}){return o=>{if(!t)return Promise.reject();const[_,s]=t.split('_'),l={listing_id:_,delete_photo_id:parseInt(s,10)};return Promise.resolve(n.default.put("/v2/update_listing_photos/"+_,{data:l})).then(({listing_photos:t})=>(o({type:p.DELETE_PHOTO_REQUEST_SUCCESS,payload:{deletedPhotoId:s}}),t)).catch(()=>{o({type:p.DELETE_PHOTO_REQUEST_FAILURE})})}},e.fetchManageListingPhotos=u,e.forceReloadFetchManageListingPhotos=function(t){const o={force:!0,strategy:'replace'};return n=>Promise.all([n({type:p.FORCE_REPLACE_MANAGE_LISTING_PHOTOS}),n(u(t,o))])},e.hideChangeCoverPhotoModal=function(){return{type:p.HIDE_CHOOSE_COVER_PHOTO_MODAL}},e.hidePhotoLoadingScreen=function(){return{type:p.HIDE_PHOTO_LOADING_SCREEN}},e.misoManageListingPhotosRequest=void 0,e.moveListingPhotos=function({destinationId:t,destinationFacilityId:o,pictureIds:_=[],forceRefetch:s=!0}){return l=>{const h={destination:{listing_id:t,room_id:o},photosToMove:_.map(t=>{const[o,n]=t.split('_');return{listing_id:o,picture_id:parseInt(n,10)}})},u=()=>n.default.post("/v2/move_listing_photos",{data:h});return s?u().then(({listing_photos:t})=>{l({type:p.MOVE_PHOTO_REQUEST_SUCCESS,payload:t})}).catch(()=>{l({type:p.MOVE_PHOTO_REQUEST_FAILURE})}):u()}},e.patchPhotoOrders=function({listingId:t,photos:o,rooms:_}){return s=>{let l=new Set;const h=new Map;o.forEach(t=>{const o=t.room_id;h.has(o)||h.set(o,[]),h.get(o).push(t)}),_.forEach(({room_id:t})=>{l=new Set([...l,...h.get(t)||[]])}),l=new Set([...l,...o]),n.default.put("/v2/update_listing_photos/"+t,{data:{listing_id:t,ordered_photo_ids:[...l].map(t=>t.id)}}).catch(()=>{s({type:p.REORDER_LISTING_PHOTOS,payload:{orderedPhotos:o}})}),s({type:p.REORDER_LISTING_PHOTOS,payload:{orderedPhotos:[...l]}})}},e.removeLocalMediaItem=function(t,o){return{type:p.REMOVE_LOCAL_MEDIA_ITEM,payload:{mediaKey:t,id:o}}},e.removeLocalMediaItems=function(t){return{type:p.REMOVE_LOCAL_MEDIA_ITEMS,payload:{mediaInfosToDelete:t}}},e.saveEditChanges=function(t,o,n){return _=>Promise.all([_({type:p.UPDATE_PHOTO_REQUESTED}),c(t,o,n)]).then(n=>{const l=n[1].listing_photos;return Promise.all([_({type:p.EDIT_PHOTO_REPLACEMENT_SUCCESS,payload:{manageListingPhotos:l,listingId:t,previousId:o}}),_((0,s.fetchListingDetails)({id:t,force:!0,strategy:'replace'}))])}).then(()=>{_({type:p.UPDATE_PHOTO_SUCCESS})}).catch(()=>{_({type:p.UPDATE_PHOTO_FAILURE})})},e.saveEditedPhoto=function(t,o){var _;const[s,p]=null!==(_=null==t?void 0:t.split('_'))&&void 0!==_?_:[];return()=>(function(t,o,_){if(!t.filePath)return Promise.reject();const s={old_photo_id:o,listing_id:_,replacement_photo:{image_path:t.filePath}};t.uploadedAt&&(s.replacement_photo.image_uploaded_at=new Date(Number(t.uploadedAt)).toISOString());t.fileSize&&(s.replacement_photo.image_file_size=t.fileSize);t.imageWidth&&(s.replacement_photo.image_width=t.imageWidth);t.imageHeight&&(s.replacement_photo.image_height=t.imageHeight);return Promise.resolve(n.default.post("/v2/replace_listing_photo/"+_,{data:s}))})(o,p,s)},e.saveNewCoverPhoto=function(t,o,_){const s={id:t,data:{make_cover_photo_id:o}};return t=>Promise.all([t({type:p.UPDATE_COVER_PHOTO_REQUEST}),n.default.put("/v2/update_listing_photos/"+s.id,s).then(o=>{l.default.dragPhotoOrderChanged({dragIndex:_,hoverIndex:0}),t({type:p.UPDATE_COVER_PHOTO_SUCCESS,payload:o.listing_photos})}).catch(o=>{t({type:p.UPDATE_COVER_PHOTO_FAILURE,payload:o.listing_photos})})])},e.setSelectedCoverPhoto=function({id:t}){return(o,_)=>{const{listingDetails:s}=_(),{listingId:l}=s,h={listing_id:l,make_cover_photo_id:t};return Promise.all([o({type:p.UPDATE_COVER_PHOTO_REQUEST}),n.default.put("/v2/update_listing_photos/"+l,{data:h}).then(({listing_photos:t})=>{o({type:p.UPDATE_COVER_PHOTO_SUCCESS,payload:t})}).catch(()=>{o({type:p.UPDATE_COVER_PHOTO_FAILURE})})])}},e.showChangeCoverPhotoModal=function(){return{type:p.SHOW_CHOOSE_COVER_PHOTO_MODAL}},e.updateCoverPhotoRequest=function(){return{type:p.UPDATE_COVER_PHOTO_REQUEST}},e.updateLocalMediaItem=function(t,o){return{type:p.UPDATE_LOCAL_MEDIA_ITEM,payload:{mediaKey:t,updates:o}}},e.updatePhotoFailure=function(){return{type:p.UPDATE_PHOTO_FAILURE}},e.updatePhotoRequested=function(){return{type:p.UPDATE_PHOTO_REQUESTED}},e.updatePhotoSuccess=function(){return{type:p.UPDATE_PHOTO_SUCCESS}},e.updatePhotosList=E,e.updatingListingPhoto=function({photoId:t,sortOrder:o,caption:_}){if(!t)return()=>Promise.reject();const[s,p]=t.split('_'),l={listing_id:s,photo_id:parseInt(p,10)};'number'==typeof o&&(l.sort_order=o);'string'==typeof _&&(l.caption=_);return t=>n.default.put("/v2/update_listing_photos/"+s,{data:l}).then(o=>t(E(o.listing_photos)))};var t=babelHelpers.interopRequireDefault(r(d[0])),o=r(d[1]),n=babelHelpers.interopRequireDefault(r(d[2])),_=r(d[3]),s=(babelHelpers.interopRequireDefault(r(d[4])),r(d[5]),r(d[6])),p=(r(d[7]),r(d[8])),l=babelHelpers.interopRequireDefault(r(d[9]));const{fetchMember:h}=(0,o.createResourceActions)({resource:_.MisoManageListingPhotosResource,schema:_.MisoManageListingPhotosSchema});function u(t,o={}){const n={id:t,format:'default',...o};return t=>Promise.all([t({type:p.FETCH_MANAGE_LISTING_PHOTOS_REQUEST}),t(h(n)).then(o=>{t({type:p.FETCH_MANAGE_LISTING_PHOTOS_SUCCESS,payload:o.listing_photos})}).catch(o=>{t({type:p.FETCH_MANAGE_LISTING_PHOTOS_FAILURE,payload:o.listing_photos})})])}function c(t,o,_){const s={json_root_body:`{"listing_id": ${t}}`,image:_};return new Promise(_=>n.default.post("/v2/listing_photos?_format=upload_only",{data:s}).then(s=>{const p=s.listing_photo,l={old_photo_id:o,listing_id:t,replacement_photo:{image_path:p.image_uploaded_path,image_uploaded_at:new Date(p.image_updated_at).toISOString(),image_file_size:p.image_file_size,image_width:p.image_width,image_height:p.image_height}};_(n.default.post("/v2/replace_listing_photo/"+t,{data:l}))}))}function E(t){return{type:p.UPDATE_PHOTOS_LIST,payload:t}}e.misoManageListingPhotosRequest=h}),"0f7cb8",["ff1dfa","f8e8b1","df4f90","03c317","56c689","48302c","ea1a1d","73d352","eb3ad8","8165be"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new(babelHelpers.interopRequireDefault(r(d[0])).default)({deserialize:t=>'string'==typeof t?JSON.parse(t):t});e.default=t}),"50961b",["c8bd7d"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getImageFileExtension=function(o){var t,s;const p=null===(t=o.split('.').pop())||void 0===t?void 0:t.toUpperCase();return null!==(s={JPEG:'JPEG',JPG:'JPEG',PNG:'PNG'}[p])&&void 0!==s?s:null},e.getPhotosMap=function(o,s){const p={},n=new Set([t.PhotoImageType.PREVIEW,t.PhotoImageType.MOVING]),_=[],u=new Map;return o.forEach(o=>{const t=o,s=o;n.has(t.type)?_.push(t):u.set(s.id,s)}),s.forEach(o=>{const t=o.room_id;p[t]=[],o.photo_ids.forEach(o=>{const s=u.get(o);s&&p[t].push(s),u.delete(o)})}),p.other=[...u.values()],_.forEach(o=>{p[o.room_id||'other'].push(o)}),p},e.getSortedRooms=function(s){const p=[],n=[],_=[],u=[];let l=0,h=0,c=0,f=0,E=0,y=0;return s.forEach(o=>{const s=o.room_type;s===t.RoomTypeEnum.BEDROOM?f++:s===t.RoomTypeEnum.FULL_BATHROOM?E++:s===t.RoomTypeEnum.HALF_BATHROOM&&y++}),s.forEach(s=>{const R=s.room_type;if(R===t.RoomTypeEnum.BEDROOM){l+=1;const t=`${o.default.t('list_your_space.photos_step.listing_photo_step_v2.rooms_bedroom')}${f<=1?'':" "+l}`;p.push({...s,room_name:t})}else if(R===t.RoomTypeEnum.FULL_BATHROOM){h+=1;const t=`${o.default.t('list_your_space.photos_step.listing_photo_step_v2.rooms_full_bathroom')}${E<=1?'':" "+h}`;n.push({...s,room_name:t})}else if(R===t.RoomTypeEnum.HALF_BATHROOM){c+=1;const t=`${o.default.t('list_your_space.photos_step.listing_photo_step_v2.room_half_bathroom')}${y<=1?'':" "+c}`;_.push({...s,room_name:t})}else u.push(s)}),[...p,...n,..._,...u]};var o=babelHelpers.interopRequireDefault(r(d[0])),t=r(d[1])}),"73d352",["6898d5","48302c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=babelHelpers.interopRequireDefault(r(d[0]));class t{constructor(){this.generateActions=this.generateActions,this.generateActions('clickedClosePictureModal','clickedOpenEditModal','clickedPhotoItem','previewAdded','generatePreviewSrc','photoImageLoaded','updateUploadProgress','uploadStarted','uploadSuccess','updateEarlyReturned','uploadError','createPreviewPhoto','deleteStarted','deleteSuccess','deleteFromRoom','deleteRequested','deleteError','updateOrder','updateCaptionSuccess','updateCaptionError','resolutionInfoAdded','dragPhotoOrderChanged','setRooms','sortPhotos','movePhotosStarted','movePhotosSuccess','movePhotosFailed','fetchedPhotos','toggleModal','addPhotoUploadError','removeErrorPreviewPhoto','showPhotoUploadError')}}t.displayName='ListingPhotoActions';var s=o.default.createActions(t);e.default=s}),"8165be",["50961b"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u){return(0,t.useMemo)(()=>{const t={};return(u||[]).forEach(u=>{if(!u)return;['booleanValue','integerValue','stringValue'].some(n=>n in u.validatorValue&&(t[u.validatorName]=u.validatorValue[n],!0))}),t},[u])};var t=r(d[0])}),"92c39f",["d7ed8e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=babelHelpers.interopRequireWildcard(r(d[0])),o=babelHelpers.interopRequireDefault(r(d[1])),s=babelHelpers.interopRequireDefault(r(d[2]));function l(){const t=r(d[3]);return l=function(){return t},t}var n=babelHelpers.interopRequireDefault(r(d[4])),u=r(d[5]),p=r(d[6]),c=babelHelpers.interopRequireDefault(r(d[7])),f=babelHelpers.interopRequireDefault(r(d[8])),_=babelHelpers.interopRequireDefault(r(d[9])),h=r(d[10]),b=r(d[11]),y=r(d[12]),I=r(d[13]),v=babelHelpers.interopRequireDefault(r(d[14])),R=babelHelpers.interopRequireDefault(r(d[15])),L=babelHelpers.interopRequireDefault(r(d[16])),P=babelHelpers.interopRequireDefault(r(d[17])),H=r(d[18]),M=r(d[19]),C=r(d[20]);var D=(0,s.default)(t=>{const{manageListingPhotos:o,listingDetails:s,entities:l}=t,{manageListingPhotos:n=[],localMediaInfos:u=[]}=o,{listingId:c}=s,{config:{homeTourConfig:f}}=s,_=l.getEntity(p.HomeTourListingSchema,c);return{allPhotosCount:n.length,localMediaInfos:u,initialRooms:_.rooms,tourConfig:f,listingPhotos:n}},t=>({onSaveMedia:({media:o,sectionId:s})=>{const[l,n]=s.split('_');return t((0,b.addNewPhoto)({media:o,destListingId:l,destFacilityId:n}))},onAppendMediaItem:(o,s)=>t((0,b.appendLocalMediaItem)(o,s)),onUpdateMediaItem:(o,s)=>t((0,b.updateLocalMediaItem)(o,s)),updateListing:o=>t((0,H.updateHomeTourListing)(o)),updatePhotoOrders:({rooms:o,listingId:s,photos:l})=>{t((0,b.patchPhotoOrders)({rooms:o,listingId:s,photos:l}))}}))((function(s){const{config:p,listingId:b,allPhotosCount:H,localMediaInfos:D,onSaveMedia:S,onAppendMediaItem:E,onUpdateMediaItem:O,initialRooms:q,tourConfig:A,updateListing:T,listingPhotos:U,updatePhotoOrders:j}=s,{localizedTitle:k,localizedSubtitle:x,readOnly:w,totalLimit:z,photoLevelErrorDisplay:F,validators:B,enableCategorization:K}=p,{refetch:G}=(0,L.default)(),N=(0,R.default)(),[W,Y]=(0,t.useState)((0,y.getSortedRooms)(q)),[J,Q]=(0,t.useState)(!1),V=I.ALL_PHOTOS_UPLOADER_MEDIA_KEY,X=D.filter(t=>t.mediaKey===V),Z=(0,P.default)(B),[$]=(0,l().useApolloMutation)(c.default);(0,t.useEffect)(()=>{f.default.getBootstrap('mys_new_myp_photos_experience_step_2_v3')&&K&&_.default.findTreatmentAndLog('mys_new_myp_photos_experience_step_2_v3')},[]);const ee=(0,t.useCallback)(t=>T({id:b,data:{set_room_counts:Object.keys(t).map(o=>({room_type:o,count:t[o].count})),home_tour_step:'completed'}}).then(({home_tour_listing:{rooms:t}})=>{Y((0,y.getSortedRooms)(t)),K&&j({rooms:t,listingId:b,photos:U}),'function'==typeof G&&G()}),[T,b,y.getSortedRooms,U]),te=(0,t.useCallback)(t=>{E(V,t);const o=t.uploadState===h.UploadState.FAILED?{success:!1,errorType:t.errorType}:{};(0,M.logPhotoClassifyEvent)(b,'mys.photo.add',{...o})},[b,V]),oe=(0,t.useCallback)(t=>{S({media:t,sectionId:b}).then(()=>{(0,M.logPhotoClassifyEvent)(b,'mys.photo.add.success')}).catch(t=>((0,M.logPhotoClassifyEvent)(b,'mys.photo.add.error'),Promise.reject(t)))},[W,b]),ie=N?u.HEADER_HEIGHT_HOST_DLS:0;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(n.default,{mediaInfos:X,title:k||o.default.t('homes.manage_your_property.all_photos'),subtitle:x||o.default.t('homes.manage_your_property.unit_all_photos_subtitle'),totalLimit:z||void 0,uploadCapacity:z?z-H:void 0,readOnly:!!w,showPhotoLevelError:!!F,validatorOptions:Z,stickyOffset:ie,getMediaUploadSignedUrl:t=>$({variables:{...t,listingId:b}}),onSaveMedia:oe,onAppendMediaItem:te,onUpdateMediaItem:O,onSetRoomButtonPress:()=>Q(!J),enableCategorization:K}),W&&A&&ee&&(0,C.jsx)(v.default,{listingId:b,visible:J,config:A,rooms:W,onClose:()=>Q(!J),onChangeRoomCounts:ee})]})}));e.default=D}),"9cf6f2",["d7ed8e","6898d5","9770cb","8bbed0","c34811","ba3de5","03c317","062787","6b945b","52d64b","b4bb20","0f7cb8","73d352","e8e38a","a7265b","19b546","d36015","92c39f","d4e281","ca8556","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){return(0,t.jsx)(l.default,{loader:o,renderPlaceholder:l.renderNull,...n})};babelHelpers.interopRequireDefault(r(d[0]));var l=babelHelpers.interopRequireWildcard(r(d[1])),t=r(d[2]);const o=(0,l.normalizeLoader)(()=>r(d[4])(d[3],"./SetRoomsModal").then(babelHelpers.interopRequireWildcard))}),"a7265b",["d7ed8e","58c24c","721ed1","c1c952","b8ad06"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=babelHelpers.interopRequireWildcard(r(d[0])),o=babelHelpers.interopRequireDefault(r(d[1])),n=babelHelpers.interopRequireDefault(r(d[2]));function l(){const t=r(d[3]);return l=function(){return t},t}var s=r(d[4]),p=babelHelpers.interopRequireDefault(r(d[5])),u=babelHelpers.interopRequireDefault(r(d[6])),c=babelHelpers.interopRequireDefault(r(d[7])),h=babelHelpers.interopRequireDefault(r(d[8])),f=babelHelpers.interopRequireDefault(r(d[9])),b=babelHelpers.interopRequireDefault(r(d[10])),x=babelHelpers.interopRequireDefault(r(d[11])),y=r(d[12]),v=r(d[13]);var C=(0,s.withStyles)(({dls19:t})=>({container:{zIndex:2,position:'relative',pointerEvents:'none'},fixed:{position:'fixed'},header:{padding:t.spacing.macro48px+" 0",backgroundColor:'white'},innerContainer:{display:'flex',flexDirection:'column',pointerEvents:'auto',[t.responsive.queries.mediumAndAbove]:{flexDirection:'row'}},innerContainerLeft:{flex:1},innerContainerRight:{alignSelf:'flex-start'},errorContainer:{marginTop:t.spacing.micro8px},buttonsContainer:{display:'flex',marginTop:t.spacing.micro24px,[t.responsive.queries.mediumAndAbove]:{marginTop:0,marginLeft:t.spacing.macro64px}},button:{marginRight:t.spacing.micro16px,display:'flex'},subtitleContainer:{...t.typography.base.md,color:t.palette.foggy,marginTop:t.spacing.micro4px,fontWeight:t.typography.weight.book},titleContainer:{...t.typography.base.xl,color:t.palette.black,fontWeight:t.typography.weight.bold}}))((function({css:s,styles:C,mediaInfos:R,title:j,subtitle:E,uploadCapacity:_,totalLimit:I,readOnly:P,showPhotoLevelError:M,validatorOptions:T,stickyOffset:q=0,getMediaUploadSignedUrl:D,onSaveMedia:w,onAppendMediaItem:H,onUpdateMediaItem:S,onSetRoomButtonPress:U,enableCategorization:A}){const L=(0,t.useRef)(null),[O,k,z]=(0,l().useInView)({threshold:1}),{width:N,height:W}=(0,b.default)(L),F=new Map([[y.ErrorType.HIT_CAPACITY,o.default.t('homes.bys.sectionPhotos.photosLimitErrorMessage',{limit:I})],[y.ErrorType.UNSUPPORTED_EXTENSION,o.default.t('homes.bys.sectionPhotos.unsupportedExtension')],[y.ErrorType.MAX_FILE_SIZE_LIMIT,o.default.t('homes.bys.sectionPhotos.maxFileSizeError')],[y.ErrorType.GENERIC_ERROR,o.default.t('homes.bys.sectionPhotos.failedUpload')]]),X=t=>P?null:(0,v.jsxs)("div",{...s(C.buttonsContainer),children:[U&&A&&(0,v.jsx)("div",{...s(C.button),children:(0,v.jsx)(u.default,{onPress:()=>U(!0),children:o.default.t('manage_your_space.photo_categorization_section.open_button_of_set_room_modal')})}),(0,v.jsx)(p.default,{type:"button",onPress:t,children:(0,v.jsx)(n.default,{k:"homes.bys.sectionPhotos.uploadPhotosText"})})]}),B=(0,t.useCallback)(t=>{L.current=t,O(t)},[O]),G=!k&&z&&z.boundingClientRect.top<=q+1;return(0,v.jsxs)("div",{ref:B,...s(C.container),children:[G&&(0,v.jsx)("div",{style:{height:W}}),(0,v.jsx)("div",{...s(C.header,G&&C.fixed,G&&{width:N,top:q}),children:(0,v.jsx)(x.default,{mediaInfos:R,getMediaUploadSignedUrl:D,onSaveMedia:w,onAppendMediaItem:H,onUpdateMediaItem:S,initCapacity:_,showPhotoLevelError:M,validatorOptions:T,children:({onUploadMedia:t,error:o})=>(0,v.jsxs)("div",{...s(C.innerContainer),children:[(0,v.jsxs)("div",{...s(C.innerContainerLeft),children:[(0,v.jsxs)(f.default,{children:[j&&(0,v.jsx)("div",{...s(C.titleContainer),children:(0,v.jsx)(h.default,{children:j})}),E&&(0,v.jsx)("div",{...s(C.subtitleContainer),children:E})]}),o&&(0,v.jsx)("div",{...s(C.errorContainer),children:(0,v.jsx)(c.default,{children:F.get(o)})})]}),(0,v.jsx)("div",{...s(C.innerContainerRight),children:X(t)})]})})})]})}));e.default=C}),"c34811",["d7ed8e","6898d5","19c98a","3b0619","bf663a","2ecd63","b8a532","7eab87","b4773a","3f0874","8c85bb","565f8d","b4bb20","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateHomeTourListing=void 0;var t=r(d[0]),o=r(d[1]);const{update:s}=(0,t.createResourceActions)({resource:o.HomeTourListingResource,schema:o.HomeTourListingSchema,format:'use_miso_default',strategy:'replace',query:{_intents:'mys_update_home_tour_listing'}});e.updateHomeTourListing=s}),"d4e281",["f8e8b1","03c317"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COVER_PHOTOS_UPLOADER_MEDIA_KEY=e.ALL_PHOTOS_UPLOADER_MEDIA_KEY=void 0;e.COVER_PHOTOS_UPLOADER_MEDIA_KEY='COVER_PHOTOS_UPLOADER_MEDIA_KEY';e.ALL_PHOTOS_UPLOADER_MEDIA_KEY='ALL_PHOTOS_UPLOADER_MEDIA_KEY'}),"e8e38a",[]);
__r("6898d5").extend({"list_your_space.photos_step.listing_photo_step_v2.rooms_bedroom":"Bedroom","list_your_space.photos_step.listing_photo_step_v2.rooms_full_bathroom":"bathroom","list_your_space.photos_step.listing_photo_step_v2.room_half_bathroom":"half bathroom","homes.manage_your_property.all_photos":"모든 사진","homes.manage_your_property.unit_all_photos_subtitle":"순서를 변경하려면 사진을 끌어서 놓으세요.","homes.bys.sectionPhotos.photosLimitErrorMessage":"사진은 총 %{limit}장까지 추가할 수 있습니다.","homes.bys.sectionPhotos.unsupportedExtension":"JPEG 또는 PNG 파일만 업로드할 수 있습니다.파일 형식을 확인하고 다시 시도해주세요.","homes.bys.sectionPhotos.maxFileSizeError":"업로드할 파일의 용량은 25MB보다 작아야 합니다.","homes.bys.sectionPhotos.failedUpload":"업로드에 실패하였습니다. 다시 시도해주세요.","manage_your_space.photo_categorization_section.open_button_of_set_room_modal":"Choose a space","homes.bys.sectionPhotos.uploadPhotosText":"사진 업로드"});
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/manage-your-space/containers/AllPhotosUploaderContainer.2ec5fabeee.js.map