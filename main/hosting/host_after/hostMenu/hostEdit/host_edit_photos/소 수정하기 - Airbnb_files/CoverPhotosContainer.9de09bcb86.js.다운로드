__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=JSON.parse("{\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"mutation\",\"name\":{\"kind\":\"Name\",\"value\":\"GetMediaUploadUrl\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"listingId\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Long\"}}},\"directives\":[]},{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"fileExtension\"}},\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"MisoMediaUploadSignedUrlFileExtension\"}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"miso\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"__typename\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"mediaUploadSignedUrl\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"request\"},\"value\":{\"kind\":\"ObjectValue\",\"fields\":[{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"listingId\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"listingId\"}}},{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"fileExtension\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"fileExtension\"}}}]}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"__typename\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"filePath\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"signedUrl\"},\"arguments\":[],\"directives\":[]}]}}]}}]}}],\"operationType\":\"MUTATION\"}");n.operationId="59573a00a3401ea7306126375f9cf5abbc8c2273ffd1ec3ee138544df4a6b9b0",n.integrityHash="ff92978ac85ad49d9c520ec1c7a240cc1c969140d937ef0eb0b78aa308325e25";var t=n;e.default=t}),"062787",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addNewListingCoverPhoto=function({filePath:t}){return(o,_)=>{const{listingDetails:s}=_(),{listingId:l}=s,h={listing_id:l,new_listing_photo:{image_path:t}};return Promise.resolve(n.default.post("/v2/add_listing_photo/"+l,{data:h})).then(({listing_photos:t})=>{const _=t.filter(t=>t.listing_id_str===l),{id:s,is_cover_eligible:h}=_[_.length-1];h||Promise.reject(Error("Image isn't eligable for cover photo"));const u={listing_id:l,make_cover_photo_id:s};return n.default.put("/v2/update_listing_photos/"+l,{data:u}).then(({listing_photos:t})=>{o({type:p.UPDATE_COVER_PHOTO_SUCCESS,payload:t})}).catch(()=>{o({type:p.UPDATE_COVER_PHOTO_FAILURE})})})}},e.addNewPhoto=function({media:o,destListingId:_,destFacilityId:s,sendGPS:l}){return h=>o.filePath?(l?t.default.gps(o.picture.file).catch(()=>{}):Promise.resolve(void 0)).then(t=>{const l=t?{lat:t.latitude,lng:t.longitude}:{},u={listing_id:_,new_listing_photo:{image_path:o.filePath,...o.uploadedAt?{image_uploaded_at:o.uploadedAt}:{},...o.fileSize?{image_file_size:o.fileSize}:{},...o.imageWidth?{image_width:o.imageWidth}:{},...o.imageHeight?{image_height:o.imageHeight}:{},...s?{room_id:s}:{},...l}};return Promise.all([h({type:p.ADD_PHOTO_REQUEST}),n.default.post("/v2/add_listing_photo/"+_,{data:u}).then(({listing_photos:t})=>(h({type:p.ADD_PHOTO_REQUEST_SUCCESS,payload:t}),t)).catch(()=>{h({type:p.ADD_PHOTO_REQUEST_FAILURE})})])}):Promise.reject()},e.appendLocalMediaItem=function(t,o){return{type:p.APPEND_LOCAL_MEDIA_ITEM,payload:{mediaKey:t,mediaItem:o}}},e.changeRoom=function({listingId:t,roomId:o,photoIds:_}){return s=>{s({type:p.CHANGE_ROOM_START,payload:{roomId:o,photoIds:_}});const l={data:{destination:{listing_id:t,room_id:o},photosToMove:_.map(o=>({listing_id:t,picture_id:o}))}};return n.default.post("/v2/move_listing_photos",l).then(({success_count:o,listing_photos:n})=>{if(o===_.length)return s({type:p.CHANGE_ROOM_SUCCESS,payload:{listingPhotos:n[t],photoIds:_,listingId:t}}),n[t]}).catch(t=>{throw s({type:p.CHANGE_ROOM_FAILED,payload:{photoIds:_}}),t})}},e.clearEditedPhotoIds=function(){return{type:p.CLEAR_EDITED_PHOTO_IDS}},e.deletePhoto=function({photoId:t}){return o=>{if(!t)return Promise.reject();const[_,s]=t.split('_'),l={listing_id:_,delete_photo_id:parseInt(s,10)};return Promise.resolve(n.default.put("/v2/update_listing_photos/"+_,{data:l})).then(({listing_photos:t})=>(o({type:p.DELETE_PHOTO_REQUEST_SUCCESS,payload:{deletedPhotoId:s}}),t)).catch(()=>{o({type:p.DELETE_PHOTO_REQUEST_FAILURE})})}},e.fetchManageListingPhotos=u,e.forceReloadFetchManageListingPhotos=function(t){const o={force:!0,strategy:'replace'};return n=>Promise.all([n({type:p.FORCE_REPLACE_MANAGE_LISTING_PHOTOS}),n(u(t,o))])},e.hideChangeCoverPhotoModal=function(){return{type:p.HIDE_CHOOSE_COVER_PHOTO_MODAL}},e.hidePhotoLoadingScreen=function(){return{type:p.HIDE_PHOTO_LOADING_SCREEN}},e.misoManageListingPhotosRequest=void 0,e.moveListingPhotos=function({destinationId:t,destinationFacilityId:o,pictureIds:_=[],forceRefetch:s=!0}){return l=>{const h={destination:{listing_id:t,room_id:o},photosToMove:_.map(t=>{const[o,n]=t.split('_');return{listing_id:o,picture_id:parseInt(n,10)}})},u=()=>n.default.post("/v2/move_listing_photos",{data:h});return s?u().then(({listing_photos:t})=>{l({type:p.MOVE_PHOTO_REQUEST_SUCCESS,payload:t})}).catch(()=>{l({type:p.MOVE_PHOTO_REQUEST_FAILURE})}):u()}},e.patchPhotoOrders=function({listingId:t,photos:o,rooms:_}){return s=>{let l=new Set;const h=new Map;o.forEach(t=>{const o=t.room_id;h.has(o)||h.set(o,[]),h.get(o).push(t)}),_.forEach(({room_id:t})=>{l=new Set([...l,...h.get(t)||[]])}),l=new Set([...l,...o]),n.default.put("/v2/update_listing_photos/"+t,{data:{listing_id:t,ordered_photo_ids:[...l].map(t=>t.id)}}).catch(()=>{s({type:p.REORDER_LISTING_PHOTOS,payload:{orderedPhotos:o}})}),s({type:p.REORDER_LISTING_PHOTOS,payload:{orderedPhotos:[...l]}})}},e.removeLocalMediaItem=function(t,o){return{type:p.REMOVE_LOCAL_MEDIA_ITEM,payload:{mediaKey:t,id:o}}},e.removeLocalMediaItems=function(t){return{type:p.REMOVE_LOCAL_MEDIA_ITEMS,payload:{mediaInfosToDelete:t}}},e.saveEditChanges=function(t,o,n){return _=>Promise.all([_({type:p.UPDATE_PHOTO_REQUESTED}),c(t,o,n)]).then(n=>{const l=n[1].listing_photos;return Promise.all([_({type:p.EDIT_PHOTO_REPLACEMENT_SUCCESS,payload:{manageListingPhotos:l,listingId:t,previousId:o}}),_((0,s.fetchListingDetails)({id:t,force:!0,strategy:'replace'}))])}).then(()=>{_({type:p.UPDATE_PHOTO_SUCCESS})}).catch(()=>{_({type:p.UPDATE_PHOTO_FAILURE})})},e.saveEditedPhoto=function(t,o){var _;const[s,p]=null!==(_=null==t?void 0:t.split('_'))&&void 0!==_?_:[];return()=>(function(t,o,_){if(!t.filePath)return Promise.reject();const s={old_photo_id:o,listing_id:_,replacement_photo:{image_path:t.filePath}};t.uploadedAt&&(s.replacement_photo.image_uploaded_at=new Date(Number(t.uploadedAt)).toISOString());t.fileSize&&(s.replacement_photo.image_file_size=t.fileSize);t.imageWidth&&(s.replacement_photo.image_width=t.imageWidth);t.imageHeight&&(s.replacement_photo.image_height=t.imageHeight);return Promise.resolve(n.default.post("/v2/replace_listing_photo/"+_,{data:s}))})(o,p,s)},e.saveNewCoverPhoto=function(t,o,_){const s={id:t,data:{make_cover_photo_id:o}};return t=>Promise.all([t({type:p.UPDATE_COVER_PHOTO_REQUEST}),n.default.put("/v2/update_listing_photos/"+s.id,s).then(o=>{l.default.dragPhotoOrderChanged({dragIndex:_,hoverIndex:0}),t({type:p.UPDATE_COVER_PHOTO_SUCCESS,payload:o.listing_photos})}).catch(o=>{t({type:p.UPDATE_COVER_PHOTO_FAILURE,payload:o.listing_photos})})])},e.setSelectedCoverPhoto=function({id:t}){return(o,_)=>{const{listingDetails:s}=_(),{listingId:l}=s,h={listing_id:l,make_cover_photo_id:t};return Promise.all([o({type:p.UPDATE_COVER_PHOTO_REQUEST}),n.default.put("/v2/update_listing_photos/"+l,{data:h}).then(({listing_photos:t})=>{o({type:p.UPDATE_COVER_PHOTO_SUCCESS,payload:t})}).catch(()=>{o({type:p.UPDATE_COVER_PHOTO_FAILURE})})])}},e.showChangeCoverPhotoModal=function(){return{type:p.SHOW_CHOOSE_COVER_PHOTO_MODAL}},e.updateCoverPhotoRequest=function(){return{type:p.UPDATE_COVER_PHOTO_REQUEST}},e.updateLocalMediaItem=function(t,o){return{type:p.UPDATE_LOCAL_MEDIA_ITEM,payload:{mediaKey:t,updates:o}}},e.updatePhotoFailure=function(){return{type:p.UPDATE_PHOTO_FAILURE}},e.updatePhotoRequested=function(){return{type:p.UPDATE_PHOTO_REQUESTED}},e.updatePhotoSuccess=function(){return{type:p.UPDATE_PHOTO_SUCCESS}},e.updatePhotosList=E,e.updatingListingPhoto=function({photoId:t,sortOrder:o,caption:_}){if(!t)return()=>Promise.reject();const[s,p]=t.split('_'),l={listing_id:s,photo_id:parseInt(p,10)};'number'==typeof o&&(l.sort_order=o);'string'==typeof _&&(l.caption=_);return t=>n.default.put("/v2/update_listing_photos/"+s,{data:l}).then(o=>t(E(o.listing_photos)))};var t=babelHelpers.interopRequireDefault(r(d[0])),o=r(d[1]),n=babelHelpers.interopRequireDefault(r(d[2])),_=r(d[3]),s=(babelHelpers.interopRequireDefault(r(d[4])),r(d[5]),r(d[6])),p=(r(d[7]),r(d[8])),l=babelHelpers.interopRequireDefault(r(d[9]));const{fetchMember:h}=(0,o.createResourceActions)({resource:_.MisoManageListingPhotosResource,schema:_.MisoManageListingPhotosSchema});function u(t,o={}){const n={id:t,format:'default',...o};return t=>Promise.all([t({type:p.FETCH_MANAGE_LISTING_PHOTOS_REQUEST}),t(h(n)).then(o=>{t({type:p.FETCH_MANAGE_LISTING_PHOTOS_SUCCESS,payload:o.listing_photos})}).catch(o=>{t({type:p.FETCH_MANAGE_LISTING_PHOTOS_FAILURE,payload:o.listing_photos})})])}function c(t,o,_){const s={json_root_body:`{"listing_id": ${t}}`,image:_};return new Promise(_=>n.default.post("/v2/listing_photos?_format=upload_only",{data:s}).then(s=>{const p=s.listing_photo,l={old_photo_id:o,listing_id:t,replacement_photo:{image_path:p.image_uploaded_path,image_uploaded_at:new Date(p.image_updated_at).toISOString(),image_file_size:p.image_file_size,image_width:p.image_width,image_height:p.image_height}};_(n.default.post("/v2/replace_listing_photo/"+t,{data:l}))}))}function E(t){return{type:p.UPDATE_PHOTOS_LIST,payload:t}}e.misoManageListingPhotosRequest=h}),"0f7cb8",["ff1dfa","f8e8b1","df4f90","03c317","56c689","48302c","ea1a1d","73d352","eb3ad8","8165be"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),o=babelHelpers.interopRequireDefault(r(d[1])),l=babelHelpers.interopRequireDefault(r(d[2])),n=babelHelpers.interopRequireDefault(r(d[3])),s=babelHelpers.interopRequireDefault(r(d[4])),u=babelHelpers.interopRequireDefault(r(d[5])),p=babelHelpers.interopRequireDefault(r(d[6])),h=r(d[7]),c=babelHelpers.interopRequireDefault(r(d[8])),f=r(d[9]),b=babelHelpers.interopRequireDefault(r(d[10])),x=babelHelpers.interopRequireDefault(r(d[11])),v=r(d[12]);class C extends t.default.Component{constructor(...t){super(...t),this.state={isAddtionalGuidelinesOpen:!1},this.handleToggleAddtionalGuidelines=()=>{this.setState(t=>({isAddtionalGuidelinesOpen:!t.isAddtionalGuidelinesOpen}))}}buildUploadButton(){const{desktopCoverUrl:t,readOnly:o,onUploadMedia:n,onOpenCoverPhotoModal:s}=this.props;if(o)return null;const u=t?s:n,p=t?(0,v.jsx)(l.default,{k:"homes.bys.coverPhoto.changePhoto"}):(0,v.jsx)(l.default,{k:"homes.bys.coverPhoto.uploadPhoto"});return(0,v.jsx)(c.default,{onPress:u,children:p})}renderLeftContent(){const{title:t,subtitle:o,renderLeftContent:l,styles:n,css:s}=this.props,u=this.buildUploadButton();return(0,v.jsxs)("div",{...s(n.leftContent),children:[(0,v.jsxs)(x.default,{children:[t&&(0,v.jsx)("div",{...s(n.titleContainer),children:(0,v.jsx)(b.default,{children:t})}),o&&(0,v.jsx)("div",{...s(n.subtitleContainer),children:o})]}),null==l?void 0:l(),u]})}render(){const{id:t,styles:l,css:n,desktopCoverUrl:h,isSaving:c}=this.props;return(0,v.jsxs)("div",{...n(l.coverPhotos),id:t,children:[(0,v.jsx)("div",{...n(l.info),children:this.renderLeftContent()}),(0,v.jsx)("div",{...n(l.image),children:(0,v.jsx)(p.default,{aspectRatio:f.LANDSCAPE_ASPECT_RATIO,children:h?(0,v.jsx)(s.default,{isLoading:!!c,children:(0,v.jsx)(u.default,{src:h,alt:o.default.t('homes.bys.coverPhoto.desktopCoverPhotoAltText'),width:"100%",height:"100%"})}):(0,v.jsx)("div",{...n(l.emptyPhotoFrame)})})})]})}}var j=(0,h.withStyles)(({dls19:{palette:t,responsive:o,spacing:l,typography:s}})=>({coverPhotos:{display:'flex',flexDirection:'column',color:t.hof,paddingBottom:l.macro48px,borderBottom:"1px solid "+t.bebe,scrollMargin:96,[o.queries.largeAndAbove]:{flexDirection:'row'}},info:{flex:1},image:{flex:1,maxWidth:400,marginTop:l.macro40px,[o.queries.largeAndAbove]:{marginTop:0}},emptyPhotoFrame:{width:'100%',height:'100%',backgroundColor:(0,n.default)(t.hof,.15)},titleContainer:{...s.base.xl,color:t.black,fontWeight:s.weight.bold},subtitleContainer:{...s.base.md,color:t.foggy,marginTop:l.micro4px,marginBottom:l.micro24px,fontWeight:s.weight.book},leftContent:{[o.queries.largeAndAbove]:{marginRight:l.micro16px}}}))(C);e.default=j}),"1d52a7",["d7ed8e","6898d5","19c98a","aa7eef","93c2af","77b29e","4375ad","bf663a","2ecd63","90bf48","b4773a","3f0874","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;babelHelpers.interopRequireDefault(r(d[0]));var t=r(d[1]),n=r(d[2]);function o({css:t,aspectRatio:o,children:l,styles:s}){const u=Math.round(1e4/o)/100+"%";return(0,n.jsx)("div",{...t(s.maintainAspectRatio,{paddingBottom:u}),children:(0,n.jsx)("div",{...t(s.absoluteContainer),children:(0,n.jsx)("div",{...t(s.relativeContainer),children:l})})})}o.defaultProps={aspectRatio:1.3333333333333333,children:null};var l=(0,t.withStyles)(()=>({maintainAspectRatio:{position:'relative'},absoluteContainer:{position:'absolute',top:0,left:0,bottom:0,right:0},relativeContainer:{width:'100%',height:'100%',position:'relative'}}))(o);e.default=l}),"4375ad",["d7ed8e","bf663a","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o){return(0,t.jsx)(l.default,{loader:n,renderPlaceholder:l.renderNull,...o})};babelHelpers.interopRequireDefault(r(d[0]));var l=babelHelpers.interopRequireWildcard(r(d[1])),t=r(d[2]);function n(){return r(d[4])(d[3],"./../../../blank-your-space/components/CoverPhotoSelectModal").then(babelHelpers.interopRequireWildcard).then(l=>l.default||l)}}),"49ac5c",["d7ed8e","58c24c","721ed1","d1618f","b8ad06"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new(babelHelpers.interopRequireDefault(r(d[0])).default)({deserialize:t=>'string'==typeof t?JSON.parse(t):t});e.default=t}),"50961b",["c8bd7d"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getImageFileExtension=function(o){var t,s;const p=null===(t=o.split('.').pop())||void 0===t?void 0:t.toUpperCase();return null!==(s={JPEG:'JPEG',JPG:'JPEG',PNG:'PNG'}[p])&&void 0!==s?s:null},e.getPhotosMap=function(o,s){const p={},n=new Set([t.PhotoImageType.PREVIEW,t.PhotoImageType.MOVING]),_=[],u=new Map;return o.forEach(o=>{const t=o,s=o;n.has(t.type)?_.push(t):u.set(s.id,s)}),s.forEach(o=>{const t=o.room_id;p[t]=[],o.photo_ids.forEach(o=>{const s=u.get(o);s&&p[t].push(s),u.delete(o)})}),p.other=[...u.values()],_.forEach(o=>{p[o.room_id||'other'].push(o)}),p},e.getSortedRooms=function(s){const p=[],n=[],_=[],u=[];let l=0,h=0,c=0,f=0,E=0,y=0;return s.forEach(o=>{const s=o.room_type;s===t.RoomTypeEnum.BEDROOM?f++:s===t.RoomTypeEnum.FULL_BATHROOM?E++:s===t.RoomTypeEnum.HALF_BATHROOM&&y++}),s.forEach(s=>{const R=s.room_type;if(R===t.RoomTypeEnum.BEDROOM){l+=1;const t=`${o.default.t('list_your_space.photos_step.listing_photo_step_v2.rooms_bedroom')}${f<=1?'':" "+l}`;p.push({...s,room_name:t})}else if(R===t.RoomTypeEnum.FULL_BATHROOM){h+=1;const t=`${o.default.t('list_your_space.photos_step.listing_photo_step_v2.rooms_full_bathroom')}${E<=1?'':" "+h}`;n.push({...s,room_name:t})}else if(R===t.RoomTypeEnum.HALF_BATHROOM){c+=1;const t=`${o.default.t('list_your_space.photos_step.listing_photo_step_v2.room_half_bathroom')}${y<=1?'':" "+c}`;_.push({...s,room_name:t})}else u.push(s)}),[...p,...n,..._,...u]};var o=babelHelpers.interopRequireDefault(r(d[0])),t=r(d[1])}),"73d352",["6898d5","48302c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=babelHelpers.interopRequireDefault(r(d[0]));class t{constructor(){this.generateActions=this.generateActions,this.generateActions('clickedClosePictureModal','clickedOpenEditModal','clickedPhotoItem','previewAdded','generatePreviewSrc','photoImageLoaded','updateUploadProgress','uploadStarted','uploadSuccess','updateEarlyReturned','uploadError','createPreviewPhoto','deleteStarted','deleteSuccess','deleteFromRoom','deleteRequested','deleteError','updateOrder','updateCaptionSuccess','updateCaptionError','resolutionInfoAdded','dragPhotoOrderChanged','setRooms','sortPhotos','movePhotosStarted','movePhotosSuccess','movePhotosFailed','fetchedPhotos','toggleModal','addPhotoUploadError','removeErrorPreviewPhoto','showPhotoUploadError')}}t.displayName='ListingPhotoActions';var s=o.default.createActions(t);e.default=s}),"8165be",["50961b"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoverPhotosContainer=M,e.default=void 0,e.getCoverPhotoUrl=P;var o=babelHelpers.interopRequireWildcard(r(d[0])),t=babelHelpers.interopRequireDefault(r(d[1])),l=babelHelpers.interopRequireDefault(r(d[2]));function n(){const o=r(d[3]);return n=function(){return o},o}var s=r(d[4]),u=babelHelpers.interopRequireDefault(r(d[5])),p=babelHelpers.interopRequireDefault(r(d[6])),h=babelHelpers.interopRequireDefault(r(d[7])),v=r(d[8]),c=babelHelpers.interopRequireDefault(r(d[9])),C=r(d[10]),f=r(d[11]),b=r(d[12]);function M(l){const{listingId:s,localMediaInfos:M,onSaveMedia:P,onSelectCoverPhoto:_,eligbleCoverPhotos:I,isSaving:y,showChangeCoverPhotoModal:S,hideChangeCoverPhotoModal:R,updateCoverPhotoRequest:U,onAppendMediaItem:q,onUpdateMediaItem:D,changeCoverPhotoModalVisible:O,config:E}=l,{localizedTitle:H,localizedSubtitle:A,readOnly:L,shouldCheckCoverEligibility:j}=E,k=C.COVER_PHOTOS_UPLOADER_MEDIA_KEY,w=M.filter(o=>o.mediaKey===k),x=j?I.filter(({eligible:o})=>o):I,[T]=(0,n().useApolloMutation)(u.default),V=(0,o.useCallback)(o=>{q(k,o);const t=o.uploadState===v.UploadState.FAILED;t||U();const l=t?{success:!1,errorType:o.errorType}:{};(0,f.logPhotoClassifyEvent)(s,'mys.photo.add',{...l})},[s,k]),z=(0,o.useCallback)(o=>{_(o),(0,f.logPhotoClassifyEvent)(s,'mys.photo.cover.save')},[s,_]);return(0,b.jsx)(p.default,{mediaInfos:w,getMediaUploadSignedUrl:o=>T({variables:{...o,listingId:s}}),onSaveMedia:P,onAppendMediaItem:V,onUpdateMediaItem:D,children:({onUploadMedia:o})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.default,{onUploadMedia:o,onOpenCoverPhotoModal:S,title:H||t.default.t('homes.manage_your_property.cover_photo'),subtitle:A||t.default.t('homes.manage_your_property.cover_photo_subtitle'),readOnly:!!L,...l}),(0,b.jsx)(c.default,{isOpen:!y&&O,onClose:R,photos:x,onUploadMedia:o,onSave:z})]})})}function P(o){if(0===o.length)return;let t;if('primary'===o[0].cover)t=o[0];else{const l=o.filter(o=>'primary'===o.cover);t=l.length>0?l[0]:o[0]}return t.large_url}var _=(0,l.default)(o=>{const{listingDetails:t,manageListingPhotos:l}=o,{isSavingInProgress:n,changeCoverPhotoModalVisible:s,manageListingPhotos:u,localMediaInfos:p}=l,h=(null!=u?u:[]).filter(({listing_id_str:o})=>o===t.listingId);return{desktopCoverUrl:P(h),mobileCoverUrl:void 0,requirements:null,additionalRequirements:null,eligbleCoverPhotos:h.map(({id:o,large_url:t,caption:l,is_cover_eligible:n})=>({id:o,src:t,caption:l,eligible:n})),isSaving:n,changeCoverPhotoModalVisible:s,localMediaInfos:p}},o=>({onSaveMedia:({filePath:t})=>{o((0,s.addNewListingCoverPhoto)({filePath:t}))},onSelectCoverPhoto:t=>{o((0,s.setSelectedCoverPhoto)({id:t}))},hideChangeCoverPhotoModal:()=>{o((0,s.hideChangeCoverPhotoModal)())},showChangeCoverPhotoModal:()=>{o((0,s.showChangeCoverPhotoModal)())},updateCoverPhotoRequest:()=>{o((0,s.updateCoverPhotoRequest)())},onAppendMediaItem:(t,l)=>o((0,s.appendLocalMediaItem)(t,l)),onUpdateMediaItem:(t,l)=>o((0,s.updateLocalMediaItem)(t,l))}))(M);e.default=_}),"b94dfb",["d7ed8e","6898d5","9770cb","8bbed0","0f7cb8","062787","565f8d","1d52a7","b4bb20","49ac5c","e8e38a","ca8556","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COVER_PHOTOS_UPLOADER_MEDIA_KEY=e.ALL_PHOTOS_UPLOADER_MEDIA_KEY=void 0;e.COVER_PHOTOS_UPLOADER_MEDIA_KEY='COVER_PHOTOS_UPLOADER_MEDIA_KEY';e.ALL_PHOTOS_UPLOADER_MEDIA_KEY='ALL_PHOTOS_UPLOADER_MEDIA_KEY'}),"e8e38a",[]);
__r("6898d5").extend({"homes.bys.coverPhoto.changePhoto":"사진 변경","homes.bys.coverPhoto.uploadPhoto":"사진 업로드","homes.bys.coverPhoto.desktopCoverPhotoAltText":"데스트톱 커버 사진","list_your_space.photos_step.listing_photo_step_v2.rooms_bedroom":"Bedroom","list_your_space.photos_step.listing_photo_step_v2.rooms_full_bathroom":"bathroom","list_your_space.photos_step.listing_photo_step_v2.room_half_bathroom":"half bathroom","homes.manage_your_property.cover_photo":"커버 사진","homes.manage_your_property.cover_photo_subtitle":"커버 사진은 숙소의 첫인상을 결정합니다."});
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/manage-your-space/containers/CoverPhotosContainer.14d4ce79cc.js.map