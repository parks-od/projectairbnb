__d((function(g,r,i,a,m,e,d){"use strict";m.exports=r(d[0])}),"018272",["b9aad0"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(t){var n={},u=0,o=t;return{getState:function(){return o},setState:function(t){o=t;for(var u=Object.keys(n),f=0;f<u.length;f+=1)void 0!==n[u[f]]&&n[u[f]](t)},subscribe:function(t){if('function'!=typeof t)throw new Error('listener must be a function.');var o=u,f=!0;return n[o]=t,u+=1,function(){f&&(f=!1,delete n[o])}}}};e.default=t}),"3fda46",[]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(){return null}n.isRequired=n,m.exports=n}),"6ba7b2",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;babelHelpers.interopRequireDefault(r(d[0]));var t=babelHelpers.interopRequireDefault(r(d[1])),l=babelHelpers.interopRequireDefault(r(d[2])),o=babelHelpers.interopRequireDefault(r(d[3])),s=babelHelpers.interopRequireDefault(r(d[4])),n=babelHelpers.interopRequireDefault(r(d[5])),u=babelHelpers.interopRequireDefault(r(d[6])),f=babelHelpers.interopRequireDefault(r(d[7])),p=r(d[8]),b=r(d[9]);var c=(0,p.withStyles)(()=>({footerButtonContainer:{display:'flex',width:'100%',justifyContent:'space-between'}}))(({css:p,styles:c,onCancelDelete:h,onConfirmDelete:D,isOpen:j})=>{const x=t.default.t('homes.bys.photoEditModal.cancel'),y=t.default.t('homes.bys.photoEditModal.confirm'),_=t.default.t('homes.bys.photoEditModal.delete_confirmation_message'),q=t.default.t('homes.bys.photoEditModal.delete_confirmation_header');return(0,b.jsxs)(l.default,{isOpen:j,accessibleTitle:t.default.t('shared.More_Details'),onClose:h,children:[(0,b.jsx)(o.default,{children:q}),(0,b.jsx)(s.default,{children:(0,b.jsx)("div",{children:_})}),(0,b.jsx)(n.default,{children:(0,b.jsxs)("div",{...p(c.footerButtonContainer),children:[(0,b.jsx)(f.default,{onPress:h,children:x}),(0,b.jsx)(u.default,{onPress:D,children:y})]})})]})});e.default=c}),"7deece",["d7ed8e","6898d5","e2b461","ac3b79","869e21","4ca646","8d3aa3","c30765","bf663a","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(){return null}function t(){return n}n.isRequired=n,m.exports={and:t,between:t,booleanSome:t,childrenHavePropXorChildren:t,childrenOf:t,childrenOfType:t,childrenSequenceOf:t,componentWithName:t,disallowedIf:t,elementType:t,empty:t,explicitNull:t,forbidExtraProps:Object,integer:t,keysOf:t,mutuallyExclusiveProps:t,mutuallyExclusiveTrueProps:t,nChildren:t,nonNegativeInteger:n,nonNegativeNumber:t,numericString:t,object:t,or:t,predicate:t,range:t,ref:t,requiredBy:t,restrictedProp:t,sequenceOf:t,shape:t,stringEndsWith:t,stringStartsWith:t,uniqueArray:t,uniqueArrayOf:t,valuesOf:t,withShape:t}}),"b9aad0",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;babelHelpers.interopRequireDefault(r(d[0]));var t=r(d[1]),n=r(d[2]),o=r(d[3]);var u=(0,t.withStyles)(()=>({component:{background:'transparent',border:'none',color:'inherit',cursor:'pointer',display:'block',margin:0,padding:0,textAlign:'inherit',textDecoration:'none',height:'100%',width:'100%',touchAction:'manipulation'}}),{pureComponent:!0})((function(t){return(0,o.jsx)(n.BaseButtonOrAnchor,{...t})}));e.default=u}),"f31a15",["d7ed8e","bf663a","ae643a","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";!(function(t,s){"object"==typeof e&&void 0!==m?s(e):"function"==typeof define&&define.amd?define("exifr",["exports"],s):s((t="undefined"!=typeof globalThis?globalThis:t||self).exifr={})})(void 0,(function(t){function s(t,s,n){return s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}var n="undefined"!=typeof self?self:g;const o="undefined"!=typeof navigator,h=o&&"undefined"==typeof HTMLImageElement,l=!(void 0===g||"undefined"==typeof process||!process.versions||!process.versions.node),f=n.Buffer,u=n.BigInt,c=!!f,p=t=>b(t)?void 0:t,y=t=>void 0!==t;function b(t){return void 0===t||(t instanceof Map?0===t.size:0===Object.values(t).filter(y).length)}function S(t){let s=new Error(t);throw delete s.stack,s}function w(t){return""===(t=(function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t})(t).trim())?void 0:t}function k(t){let s=(function(t){let s=0;return t.ifd0.enabled&&(s+=1024),t.exif.enabled&&(s+=2048),t.makerNote&&(s+=2048),t.userComment&&(s+=1024),t.gps.enabled&&(s+=512),t.interop.enabled&&(s+=100),t.ifd1.enabled&&(s+=1024),s+2048})(t);return t.jfif.enabled&&(s+=50),t.xmp.enabled&&(s+=2e4),t.iptc.enabled&&(s+=14e3),t.icc.enabled&&(s+=6e3),s}const v=t=>String.fromCharCode.apply(null,t),O="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function x(t){return O?O.decode(t):c?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(v(t)))}class C{static from(t,s){return t instanceof this&&t.le===s?t:new C(t,void 0,void 0,s)}constructor(t,s=0,n,o){if("boolean"==typeof o&&(this.le=o),Array.isArray(t)&&(t=new Uint8Array(t)),0===t)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){void 0===n&&(n=t.byteLength-s);let o=new DataView(t,s,n);this._swapDataView(o)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof C){void 0===n&&(n=t.byteLength-s),(s+=t.byteOffset)+n>t.byteOffset+t.byteLength&&S("Creating view outside of available memory in ArrayBuffer");let o=new DataView(t.buffer,s,n);this._swapDataView(o)}else if("number"==typeof t){let s=new DataView(new ArrayBuffer(t));this._swapDataView(s)}else S("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,s,n=C){return t instanceof DataView||t instanceof C?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||S("BufferView.set(): Invalid data argument."),this.toUint8().set(t,s),new n(this,s,t.byteLength)}subarray(t,s){return s=s||this._lengthToEnd(t),new C(this,t,s)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,s){return new Uint8Array(this.buffer,this.byteOffset+t,s)}getString(t=0,s=this.byteLength){return x(this.getUint8Array(t,s))}getLatin1String(t=0,s=this.byteLength){let n=this.getUint8Array(t,s);return v(n)}getUnicodeString(t=0,s=this.byteLength){const n=[];for(let o=0;o<s&&t+o<this.byteLength;o+=2)n.push(this.getUint16(t+o));return v(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,s=this.le){return this.dataView.getInt16(t,s)}getInt32(t,s=this.le){return this.dataView.getInt32(t,s)}getUint16(t,s=this.le){return this.dataView.getUint16(t,s)}getUint32(t,s=this.le){return this.dataView.getUint32(t,s)}getFloat32(t,s=this.le){return this.dataView.getFloat32(t,s)}getFloat64(t,s=this.le){return this.dataView.getFloat64(t,s)}getFloat(t,s=this.le){return this.dataView.getFloat32(t,s)}getDouble(t,s=this.le){return this.dataView.getFloat64(t,s)}getUintBytes(t,s,n){switch(s){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,s,n){switch(s){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function P(t,s){S(`${t} '${s}' was not loaded, try using full build of exifr.`)}class A extends Map{constructor(t){super(),this.kind=t}get(t,s){return this.has(t)||P(this.kind,t),s&&(t in s||(function(t,s){S(`Unknown ${t} '${s}'.`)})(this.kind,t),s[t].enabled||P(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}}var U=new A("file parser"),B=new A("segment parser"),I=new A("file reader");let F=n.fetch;const L="Invalid input argument";function D(t,s){return(n=t).startsWith("data:")||n.length>1e4?z(t,s,"base64"):l&&t.includes("://")?T(t,s,"url",N):l?z(t,s,"fs"):o?T(t,s,"url",N):void S(L);var n}async function T(t,s,n,o){return I.has(n)?z(t,s,n):o?(async function(t,s){let n=await s(t);return new C(n)})(t,o):void S(`Parser ${n} is not loaded`)}async function z(t,s,n){let o=new(I.get(n))(t,s);return await o.read(),o}const N=t=>F(t).then(t=>t.arrayBuffer()),V=t=>new Promise((s,n)=>{let o=new FileReader;o.onloadend=()=>s(o.result||new ArrayBuffer),o.onerror=n,o.readAsArrayBuffer(t)});class M extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function E(t,s,n){let o=new M;for(let[t,s]of n)o.set(t,s);if(Array.isArray(s))for(let n of s)t.set(n,o);else t.set(s,o);return o}function R(t,s,n){let o,h=t.get(s);for(o of n)h.set(o[0],o[1])}const j=new Map,G=new Map,_=new Map,H=37500,W=37510,$=33723,K=34675,X=34665,Y=34853,q=40965,J=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Z=["jfif","xmp","icc","iptc","ihdr"],Q=["tiff",...Z],ee=["ifd0","ifd1","exif","gps","interop"],te=[...Q,...ee],ie=["makerNote","userComment"],se=["translateKeys","translateValues","reviveValues","multiSegment"],ne=[...se,"sanitize","mergeOutput","silentErrors"];class re{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class ae extends re{get needed(){return this.enabled||this.deps.size>0}constructor(t,n,o,h){if(super(),s(this,"enabled",!1),s(this,"skip",new Set),s(this,"pick",new Set),s(this,"deps",new Set),s(this,"translateKeys",!1),s(this,"translateValues",!1),s(this,"reviveValues",!1),this.key=t,this.enabled=n,this.parse=this.enabled,this.applyInheritables(h),this.canBeFiltered=ee.includes(t),this.canBeFiltered&&(this.dict=j.get(t)),void 0!==o)if(Array.isArray(o))this.parse=this.enabled=!0,this.canBeFiltered&&o.length>0&&this.translateTagSet(o,this.pick);else if("object"==typeof o){if(this.enabled=!0,this.parse=!1!==o.parse,this.canBeFiltered){let{pick:t,skip:s}=o;t&&t.length>0&&this.translateTagSet(t,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(o)}else!0===o||!1===o?this.parse=this.enabled=o:S("Invalid options argument: "+o)}applyInheritables(t){let s,n;for(s of se)n=t[s],void 0!==n&&(this[s]=n)}translateTagSet(t,s){if(this.dict){let n,o,{tagKeys:h,tagValues:l}=this.dict;for(n of t)"string"==typeof n?(o=l.indexOf(n),-1===o&&(o=h.indexOf(Number(n))),-1!==o&&s.add(Number(h[o]))):s.add(n)}else for(let n of t)s.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,de(this.pick,this.deps)):this.enabled&&this.pick.size>0&&de(this.pick,this.deps)}}var oe={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},he=new Map;class le extends re{static useCached(t){let s=he.get(t);return void 0!==s||(s=new this(t),he.set(t,s)),s}constructor(t){super(),!0===t?this.setupFromTrue():void 0===t?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):"object"==typeof t?this.setupFromObject(t):S("Invalid options argument "+t),void 0===this.firstChunkSize&&(this.firstChunkSize=o?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of J)this[t]=oe[t];for(t of ne)this[t]=oe[t];for(t of ie)this[t]=oe[t];for(t of te)this[t]=new ae(t,oe[t],void 0,this)}setupFromTrue(){let t;for(t of J)this[t]=oe[t];for(t of ne)this[t]=oe[t];for(t of ie)this[t]=!0;for(t of te)this[t]=new ae(t,!0,void 0,this)}setupFromArray(t){let s;for(s of J)this[s]=oe[s];for(s of ne)this[s]=oe[s];for(s of ie)this[s]=oe[s];for(s of te)this[s]=new ae(s,!1,void 0,this);this.setupGlobalFilters(t,void 0,ee)}setupFromObject(t){let s;for(s of(ee.ifd0=ee.ifd0||ee.image,ee.ifd1=ee.ifd1||ee.thumbnail,Object.assign(this,t),J))this[s]=ue(t[s],oe[s]);for(s of ne)this[s]=ue(t[s],oe[s]);for(s of ie)this[s]=ue(t[s],oe[s]);for(s of Q)this[s]=new ae(s,oe[s],t[s],this);for(s of ee)this[s]=new ae(s,oe[s],t[s],this.tiff);this.setupGlobalFilters(t.pick,t.skip,ee,te),!0===t.tiff?this.batchEnableWithBool(ee,!0):!1===t.tiff?this.batchEnableWithUserValue(ee,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,ee):"object"==typeof t.tiff&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,ee)}batchEnableWithBool(t,s){for(let n of t)this[n].enabled=s}batchEnableWithUserValue(t,s){for(let n of t){let t=s[n];this[n].enabled=!1!==t&&void 0!==t}}setupGlobalFilters(t,s,n,o=n){if(t&&t.length){for(let t of o)this[t].enabled=!1;let s=fe(t,n);for(let[t,n]of s)de(this[t].pick,n),this[t].enabled=!0}else if(s&&s.length){let t=fe(s,n);for(let[s,n]of t)de(this[s].skip,n)}}filterNestedSegmentTags(){let{ifd0:t,exif:s,xmp:n,iptc:o,icc:h}=this;this.makerNote?s.deps.add(H):s.skip.add(H),this.userComment?s.deps.add(W):s.skip.add(W),n.enabled||t.skip.add(700),o.enabled||t.skip.add($),h.enabled||t.skip.add(K)}traverseTiffDependencyTree(){let{ifd0:t,exif:s,gps:n,interop:o}=this;o.needed&&(s.deps.add(q),t.deps.add(q)),s.needed&&t.deps.add(X),n.needed&&t.deps.add(Y),this.tiff.enabled=ee.some(t=>!0===this[t].enabled)||this.makerNote||this.userComment;for(let t of ee)this[t].finalizeFilters()}get onlyTiff(){return!Z.map(t=>this[t].enabled).some(t=>!0===t)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of Q)this[t].enabled&&!B.has(t)&&P("segment parser",t)}}function fe(t,s){let n,o,h,l,f=[];for(h of s){for(l of(n=j.get(h),o=[],n))(t.includes(l[0])||t.includes(l[1]))&&o.push(l[0]);o.length&&f.push([h,o])}return f}function ue(t,s){return void 0!==t?t:void 0!==s?s:void 0}function de(t,s){for(let n of s)t.add(n)}s(le,"default",oe);class ce{constructor(t){s(this,"parsers",{}),s(this,"output",{}),s(this,"errors",[]),s(this,"pushToErrors",t=>this.errors.push(t)),this.options=le.useCached(t)}async read(t){this.file=await(function(t,s){return"string"==typeof t?D(t,s):o&&!h&&t instanceof HTMLImageElement?D(t.src,s):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new C(t):o&&t instanceof Blob?T(t,s,"blob",V):void S(L)})(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,s=t.getUint16(0);for(let[n,o]of U)if(o.canHandle(t,s))return this.fileParser=new o(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),S("Unknown file format")}async parse(){let{output:t,errors:s}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),s.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&s.length>0&&(t.errors=s),p(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let s=Object.values(this.parsers).map(async s=>{let n=await s.parse();s.assignToOutput(t,n)});this.options.silentErrors&&(s=s.map(t=>t.catch(this.pushToErrors))),await Promise.all(s)}async extractThumbnail(){this.setup();let{options:t,file:s}=this,n=B.get("tiff",t);var o;if(s.tiff?o={start:0,type:"tiff"}:s.jpeg&&(o=await this.fileParser.getOrFindSegment("tiff")),void 0===o)return;let h=await this.fileParser.ensureSegmentChunk(o),l=this.parsers.tiff=new n(h,t,s),f=await l.extractThumbnail();return s.close&&s.close(),f}}async function ge(t,s){let n=new ce(s);return await n.read(t),n.parse()}var pe=Object.freeze({__proto__:null,parse:ge,Exifr:ce,fileParsers:U,segmentParsers:B,fileReaders:I,tagKeys:j,tagValues:G,tagRevivers:_,createDictionary:E,extendDictionary:R,fetchUrlAsArrayBuffer:N,readBlobAsArrayBuffer:V,chunkedProps:J,otherSegments:Z,segments:Q,tiffBlocks:ee,segmentsAndBlocks:te,tiffExtractables:ie,inheritables:se,allFormatters:ne,Options:le});class me{constructor(t,n,o){s(this,"errors",[]),s(this,"ensureSegmentChunk",async t=>{let s=t.start,n=t.size||65536;if(this.file.chunked)if(this.file.available(s,n))t.chunk=this.file.subarray(s,n);else try{t.chunk=await this.file.readChunk(s,n)}catch(s){S(`Couldn't read segment: ${JSON.stringify(t)}. ${s.message}`)}else this.file.byteLength>s+n?t.chunk=this.file.subarray(s,n):void 0===t.size?t.chunk=this.file.subarray(s):S("Segment unreachable: "+JSON.stringify(t));return t.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=n,this.parsers=o}injectSegment(t,s){this.options[t].enabled&&this.createParser(t,s)}createParser(t,s){let n=new(B.get(t))(s,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let s of t){let{type:t,chunk:n}=s,o=this.options[t];if(o&&o.enabled){let s=this.parsers[t];s&&s.append||s||this.createParser(t,n)}}}async readSegments(t){let s=t.map(this.ensureSegmentChunk);await Promise.all(s)}}class ye{static findPosition(t,s){let n=t.getUint16(s+2)+2,o="function"==typeof this.headerLength?this.headerLength(t,s,n):this.headerLength,h=s+o,l=n-o;return{offset:s,length:n,headerLength:o,start:h,size:l,end:h+l}}static parse(t,s={}){return new this(t,new le({[this.type]:s}),t).parse()}normalizeInput(t){return t instanceof C?t:new C(t)}constructor(t,n={},o){s(this,"errors",[]),s(this,"raw",new Map),s(this,"handleError",t=>{if(!this.options.silentErrors)throw t;this.errors.push(t.message)}),this.chunk=this.normalizeInput(t),this.file=o,this.type=this.constructor.type,this.globalOptions=this.options=n,this.localOptions=n[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,s){let n=_.get(s),o=G.get(s),h=j.get(s),l=this.options[s],f=l.reviveValues&&!!n,u=l.translateValues&&!!o,c=l.translateKeys&&!!h,p={};for(let[s,l]of t)f&&n.has(s)?l=n.get(s)(l):u&&o.has(s)&&(l=this.translateValue(l,o.get(s))),c&&h.has(s)&&(s=h.get(s)||s),p[s]=l;return p}translateValue(t,s){return s[t]||s.DEFAULT||t}assignToOutput(t,s){this.assignObjectToOutput(t,this.constructor.type,s)}assignObjectToOutput(t,s,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[s]?Object.assign(t[s],n):t[s]=n}}function be(t,s,n){for(let[o,h]of B)if(h.canHandle(t,s,n))return o}s(ye,"headerLength",4),s(ye,"type",void 0),s(ye,"multiSegment",!1),s(ye,"canHandle",()=>!1);class Se extends me{constructor(...t){super(...t),s(this,"appSegments",[]),s(this,"jpegSegments",[]),s(this,"unknownSegments",[])}static canHandle(t,s){return 65496===s}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){!0===t?(this.findAll=!0,this.wanted=new Set(B.keyList())):(t=void 0===t?B.keyList().filter(t=>this.options[t].enabled):t.filter(t=>this.options[t].enabled&&B.has(t)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,s){this.setupSegmentFinderArgs(s);let{file:n,findAll:o,wanted:h,remaining:l}=this;if(!o&&this.file.chunked&&(o=Array.from(h).some(t=>{let s=B.get(t),n=this.options[t];return s.multiSegment&&n.multiSegment}),o&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let s=!1;for(;l.size>0&&!s&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:o}=n,h=this.appSegments.some(t=>!this.file.available(t.offset||t.start,t.length||t.size));if(s=t>o&&!h?!await n.readNextChunk(t):!await n.readNextChunk(o),void 0===(t=this.findAppSegmentsInRange(t,n.byteLength)))return}}}findAppSegmentsInRange(t,s){s-=2;let n,o,h,l,f,u,{file:c,findAll:p,wanted:y,remaining:b,options:S}=this;for(;t<s;t++)if(255===c.getUint8(t))if(n=c.getUint8(t+1),(k=n)>=224&&k<=239){if(o=c.getUint16(t+2),h=be(c,t,o),h&&y.has(h)&&(l=B.get(h),f=l.findPosition(c,t),u=S[h],f.type=h,this.appSegments.push(f),!p&&(l.multiSegment&&u.multiSegment?(this.unfinishedMultiSegment=f.chunkNumber<f.chunkCount,this.unfinishedMultiSegment||b.delete(h)):b.delete(h),0===b.size)))break;S.recordUnknownSegments&&(f=ye.findPosition(c,t),f.marker=n,this.unknownSegments.push(f)),t+=o+1}else if(192===(w=n)||194===w||196===w||219===w||221===w||218===w||254===w){if(o=c.getUint16(t+2),218===n&&!1!==S.stopAfterSos)return;S.recordJpegSegments&&this.jpegSegments.push({offset:t,length:o,marker:n}),t+=o+1}var w,k;return t}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let t=(function(t,s){let n,o,h,l=new Map;for(let s=0;s<t.length;s++)n=t[s],o=n.type,l.has(o)?h=l.get(o):l.set(o,h=[]),h.push(n);return Array.from(l)})(this.appSegments);this.mergedAppSegments=t.map(([t,s])=>{let n=B.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(s)}:s[0]})}getSegment(t){return this.appSegments.find(s=>s.type===t)}async getOrFindSegment(t){let s=this.getSegment(t);return void 0===s&&(await this.findAppSegments(0,[t]),s=this.getSegment(t)),s}}s(Se,"type","jpeg"),U.set("jpeg",Se);const we=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class ke extends ye{parseHeader(){var t=this.chunk.getUint16();18761===t?this.le=!0:19789===t&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,s,n=new Map){let{pick:o,skip:h}=this.options[s];o=new Set(o);let l=o.size>0,f=0===h.size,u=this.chunk.getUint16(t);t+=2;for(let c=0;c<u;c++){let u=this.chunk.getUint16(t);if(l){if(o.has(u)&&(n.set(u,this.parseTag(t,u,s)),o.delete(u),0===o.size))break}else!f&&h.has(u)||n.set(u,this.parseTag(t,u,s));t+=12}return n}parseTag(t,s,n){let{chunk:o}=this,h=o.getUint16(t+2),l=o.getUint32(t+4),f=we[h];if(f*l<=4?t+=8:t=o.getUint32(t+8),(h<1||h>13)&&S(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${s.toString(16)}, type: ${h}, offset ${t}`),t>o.byteLength&&S(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${s.toString(16)}, type: ${h}, offset ${t} is outside of chunk size ${o.byteLength}`),1===h)return o.getUint8Array(t,l);if(2===h)return w(o.getString(t,l));if(7===h)return o.getUint8Array(t,l);if(1===l)return this.parseTagValue(h,t);{let s=new((function(t){switch(t){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(h))(l),n=f;for(let o=0;o<l;o++)s[o]=this.parseTagValue(h,t),t+=n;return s}}parseTagValue(t,s){let{chunk:n}=this;switch(t){case 1:return n.getUint8(s);case 3:return n.getUint16(s);case 4:return n.getUint32(s);case 5:return n.getUint32(s)/n.getUint32(s+4);case 6:return n.getInt8(s);case 8:return n.getInt16(s);case 9:return n.getInt32(s);case 10:return n.getInt32(s)/n.getInt32(s+4);case 11:return n.getFloat(s);case 12:return n.getDouble(s);case 13:return n.getUint32(s);default:S("Invalid tiff type "+t)}}}class ve extends ke{static canHandle(t,s){return 225===t.getUint8(s+1)&&1165519206===t.getUint32(s+4)&&0===t.getUint16(s+8)}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let s=this[t]();return void 0!==s.catch&&(s=s.catch(this.handleError)),s}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),s=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(s)}}parseBlock(t,s){let n=new Map;return this[s]=n,this.parseTags(t,s,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&S("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&S(`IFD0 offset points to outside of file.\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,k(this.options));let s=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==s.size?(this.exifOffset=s.get(X),this.interopOffset=s.get(q),this.gpsOffset=s.get(Y),this.xmp=s.get(700),this.iptc=s.get($),this.icc=s.get(K),this.options.sanitize&&(s.delete(X),s.delete(q),s.delete(Y),s.delete(700),s.delete($),s.delete(K)),s):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,k(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(q)),this.makerNote=t.get(H),this.userComment=t.get(W),this.options.sanitize&&(t.delete(q),t.delete(H),t.delete(W)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,s){let n=t.get(s);n&&1===n.length&&t.set(s,n[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Oe(...t.get(2),t.get(1))),t.set("longitude",Oe(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let t=this.ifd1.get(513),s=this.ifd1.get(514);return this.chunk.getUint8Array(t,s)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,s,n,o={};for(s of ee)if(t=this[s],!b(t))if(n=this.canTranslate?this.translateBlock(t,s):Object.fromEntries(t),this.options.mergeOutput){if("ifd1"===s)continue;Object.assign(o,n)}else o[s]=n;return this.makerNote&&(o.makerNote=this.makerNote),this.userComment&&(o.userComment=this.userComment),o}assignToOutput(t,s){if(this.globalOptions.mergeOutput)Object.assign(t,s);else for(let[n,o]of Object.entries(s))this.assignObjectToOutput(t,n,o)}}function Oe(t,s,n,o){var h=t+s/60+n/3600;return"S"!==o&&"W"!==o||(h*=-1),h}s(ve,"type","tiff"),s(ve,"headerLength",10),B.set("tiff",ve);var xe=Object.freeze({__proto__:null,default:pe,Exifr:ce,fileParsers:U,segmentParsers:B,fileReaders:I,tagKeys:j,tagValues:G,tagRevivers:_,createDictionary:E,extendDictionary:R,fetchUrlAsArrayBuffer:N,readBlobAsArrayBuffer:V,chunkedProps:J,otherSegments:Z,segments:Q,tiffBlocks:ee,segmentsAndBlocks:te,tiffExtractables:ie,inheritables:se,allFormatters:ne,Options:le,parse:ge});const Ce={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Pe=Object.assign({},Ce,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Ae(t){let s=new ce(Pe);await s.read(t);let n=await s.parse();if(n&&n.gps){let{latitude:t,longitude:s}=n.gps;return{latitude:t,longitude:s}}}const Ue=Object.assign({},Ce,{tiff:!1,ifd1:!0,mergeOutput:!1});async function Be(t){let s=new ce(Ue);await s.read(t);let n=await s.extractThumbnail();return n&&c?f.from(n):n}async function Ie(t){let s=await this.thumbnail(t);if(void 0!==s){let t=new Blob([s]);return URL.createObjectURL(t)}}const Fe=Object.assign({},Ce,{firstChunkSize:4e4,ifd0:[274]});async function Le(t){let s=new ce(Fe);await s.read(t);let n=await s.parse();if(n&&n.ifd0)return n.ifd0[274]}const De=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});if(t.rotateCanvas=!0,t.rotateCss=!0,"object"==typeof navigator){let s=navigator.userAgent;if(s.includes("iPad")||s.includes("iPhone")){let n=s.match(/OS (\d+)_(\d+)/);if(n){let[,s,o]=n,h=Number(s)+.1*Number(o);t.rotateCanvas=h<13.4,t.rotateCss=!1}}else if(s.includes("OS X 10")){let[,n]=s.match(/OS X 10[_.](\d+)/);t.rotateCanvas=t.rotateCss=Number(n)<15}if(s.includes("Chrome/")){let[,n]=s.match(/Chrome\/(\d+)/);t.rotateCanvas=t.rotateCss=Number(n)<81}else if(s.includes("Firefox/")){let[,n]=s.match(/Firefox\/(\d+)/);t.rotateCanvas=t.rotateCss=Number(n)<77}}async function Te(s){let n=await Le(s);return Object.assign({canvas:t.rotateCanvas,css:t.rotateCss},De[n])}class ze extends C{constructor(...t){super(...t),s(this,"ranges",new Ne),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(t,s,n){if(0===t&&0===this.byteLength&&n){let t=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(t)}else{let n=t+s;if(n>this.byteLength){let{dataView:t}=this._extend(n);this._swapDataView(t)}}}_extend(t){let s;s=c?f.allocUnsafe(t):new Uint8Array(t);let n=new DataView(s.buffer,s.byteOffset,s.byteLength);return s.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:s,dataView:n}}subarray(t,s,n=!1){return s=s||this._lengthToEnd(t),n&&this._tryExtend(t,s),this.ranges.add(t,s),super.subarray(t,s)}set(t,s,n=!1){n&&this._tryExtend(s,t.byteLength,t);let o=super.set(t,s);return this.ranges.add(s,o.byteLength),o}async ensureChunk(t,s){this.chunked&&(this.ranges.available(t,s)||await this.readChunk(t,s))}available(t,s){return this.ranges.available(t,s)}}class Ne{constructor(){s(this,"list",[])}get length(){return this.list.length}add(t,s,n=0){let o=t+s,h=this.list.filter(s=>Ve(t,s.offset,o)||Ve(t,s.end,o));if(h.length>0){t=Math.min(t,...h.map(t=>t.offset)),o=Math.max(o,...h.map(t=>t.end)),s=o-t;let n=h.shift();n.offset=t,n.length=s,n.end=o,this.list=this.list.filter(t=>!h.includes(t))}else this.list.push({offset:t,length:s,end:o})}available(t,s){let n=t+s;return this.list.some(s=>s.offset<=t&&n<=s.end)}}function Ve(t,s,n){return t<=s&&s<=n}class Me extends ze{constructor(t,n){super(0),s(this,"chunksRead",0),this.input=t,this.options=n}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let s=this.options.chunkSize,n=await this.readChunk(t,s);return!!n&&n.byteLength===s}async readChunk(t,s){if(this.chunksRead++,0!==(s=this.safeWrapAddress(t,s)))return this._readChunk(t,s)}safeWrapAddress(t,s){return void 0!==this.size&&t+s>this.size?Math.max(0,this.size-t):s}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}I.set("blob",class extends Me{async readWhole(){this.chunked=!1;let t=await V(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,s){let n=s?t+s:void 0,o=this.input.slice(t,n),h=await V(o);return this.set(h,t,!0)}});var Ee=Object.freeze({__proto__:null,default:xe,Exifr:ce,fileParsers:U,segmentParsers:B,fileReaders:I,tagKeys:j,tagValues:G,tagRevivers:_,createDictionary:E,extendDictionary:R,fetchUrlAsArrayBuffer:N,readBlobAsArrayBuffer:V,chunkedProps:J,otherSegments:Z,segments:Q,tiffBlocks:ee,segmentsAndBlocks:te,tiffExtractables:ie,inheritables:se,allFormatters:ne,Options:le,parse:ge,gpsOnlyOptions:Pe,gps:Ae,thumbnailOnlyOptions:Ue,thumbnail:Be,thumbnailUrl:Ie,orientationOnlyOptions:Fe,orientation:Le,rotations:De,get rotateCanvas(){return t.rotateCanvas},get rotateCss(){return t.rotateCss},rotation:Te});I.set("url",class extends Me{async readWhole(){this.chunked=!1;let t=await N(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,s){let n=s?t+s-1:void 0,o=this.options.httpHeaders||{};(t||n)&&(o.range="bytes="+[t,n].join("-"));let h=await F(this.input,{headers:o}),l=await h.arrayBuffer(),f=l.byteLength;if(416!==h.status)return f!==s&&(this.size=t+f),this.set(l,t,!0)}}),C.prototype.getUint64=function(t){let s=this.getUint32(t),n=this.getUint32(t+4);return s<1048575?s<<32|n:void 0!==typeof u?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),u(s)<<u(32)|u(n)):void S("Trying to read 64b value but JS can only handle 53b numbers.")};class Re extends me{parseBoxes(t=0){let s=[];for(;t<this.file.byteLength-4;){let n=this.parseBoxHead(t);if(s.push(n),0===n.length)break;t+=n.length}return s}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,s){return void 0===t.boxes&&this.parseSubBoxes(t),t.boxes.find(t=>t.kind===s)}parseBoxHead(t){let s=this.file.getUint32(t),n=this.file.getString(t+4,4),o=t+8;return 1===s&&(s=this.file.getUint64(t+8),o+=8),{offset:t,length:s,kind:n,start:o}}parseBoxFullHead(t){if(void 0!==t.version)return;let s=this.file.getUint32(t.start);t.version=s>>24,t.start+=4}}class je extends Re{static canHandle(t,s){if(0!==s)return!1;let n=t.getUint16(2);if(n>50)return!1;let o=16,h=[];for(;o<n;)h.push(t.getString(o,4)),o+=4;return h.includes(this.type)}async parse(){let t=this.file.getUint32(0),s=this.parseBoxHead(t);for(;"meta"!==s.kind;)t+=s.length,await this.file.ensureChunk(t,16),s=this.parseBoxHead(t);await this.file.ensureChunk(s.offset,s.length),this.parseBoxFullHead(s),this.parseSubBoxes(s),this.options.icc.enabled&&await this.findIcc(s),this.options.tiff.enabled&&await this.findExif(s)}async registerSegment(t,s,n){await this.file.ensureChunk(s,n);let o=this.file.subarray(s,n);this.createParser(t,o)}async findIcc(t){let s=this.findBox(t,"iprp");if(void 0===s)return;let n=this.findBox(s,"ipco");if(void 0===n)return;let o=this.findBox(n,"colr");void 0!==o&&await this.registerSegment("icc",o.offset+12,o.length)}async findExif(t){let s=this.findBox(t,"iinf");if(void 0===s)return;let n=this.findBox(t,"iloc");if(void 0===n)return;let o=this.findExifLocIdInIinf(s),h=this.findExtentInIloc(n,o);if(void 0===h)return;let[l,f]=h;await this.file.ensureChunk(l,f);let u=4+this.file.getUint32(l);l+=u,f-=u,await this.registerSegment("tiff",l,f)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let s,n,o,h,l=t.start,f=this.file.getUint16(l);for(l+=2;f--;){if(s=this.parseBoxHead(l),this.parseBoxFullHead(s),n=s.start,s.version>=2&&(o=3===s.version?4:2,h=this.file.getString(n+o+2,4),"Exif"===h))return this.file.getUintBytes(n,o);l+=s.length}}get8bits(t){let s=this.file.getUint8(t);return[s>>4,15&s]}findExtentInIloc(t,s){this.parseBoxFullHead(t);let n=t.start,[o,h]=this.get8bits(n++),[l,f]=this.get8bits(n++),u=2===t.version?4:2,c=1===t.version||2===t.version?2:0,p=f+o+h,y=2===t.version?4:2,b=this.file.getUintBytes(n,y);for(n+=y;b--;){let t=this.file.getUintBytes(n,u);n+=u+c+2+l;let y=this.file.getUint16(n);if(n+=2,t===s)return y>1&&console.warn("ILOC box has more than one extent but we're only processing one\nPlease create an issue at https://github.com/MikeKovarik/exifr with this file"),[this.file.getUintBytes(n+f,o),this.file.getUintBytes(n+f+o,h)];n+=y*p}}}class Ge extends je{}s(Ge,"type","heic");class _e extends je{}s(_e,"type","avif"),U.set("heic",Ge),U.set("avif",_e),E(j,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),E(j,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),E(j,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),E(G,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let He=E(G,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const We={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};He.set(37392,We),He.set(41488,We);const $e={0:"Normal",1:"Low",2:"High"};function Ke(t){return"object"==typeof t&&void 0!==t.length?t[0]:t}function Xe(t){let s=Array.from(t).slice(1);return s[1]>15&&(s=s.map(t=>String.fromCharCode(t))),"0"!==s[2]&&0!==s[2]||s.pop(),s.join(".")}function Ye(t){if("string"==typeof t){var[s,n,o,h,l,f]=t.trim().split(/[-: ]/g).map(Number),u=new Date(s,n-1,o);return Number.isNaN(h)||Number.isNaN(l)||Number.isNaN(f)||(u.setHours(h),u.setMinutes(l),u.setSeconds(f)),Number.isNaN(+u)?t:u}}function qe(t){if("string"==typeof t)return t;let s=[];if(0===t[1]&&0===t[t.length-1])for(let n=0;n<t.length;n+=2)s.push(Je(t[n+1],t[n]));else for(let n=0;n<t.length;n+=2)s.push(Je(t[n],t[n+1]));return w(String.fromCodePoint(...s))}function Je(t,s){return t<<8|s}He.set(41992,$e),He.set(41993,$e),He.set(41994,$e),E(_,["ifd0","ifd1"],[[50827,function(t){return"string"!=typeof t?x(t):t}],[306,Ye],[40091,qe],[40092,qe],[40093,qe],[40094,qe],[40095,qe]]),E(_,"exif",[[40960,Xe],[36864,Xe],[36867,Ye],[36868,Ye],[40962,Ke],[40963,Ke]]),E(_,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);const Ze="http://ns.adobe.com/",Qe="http://ns.adobe.com/xmp/extension/";class et extends ye{static canHandle(t,s){return 225===t.getUint8(s+1)&&1752462448===t.getUint32(s+4)&&t.getString(s+4,Ze.length)===Ze}static headerLength(t,s){return t.getString(s+4,Qe.length)===Qe?79:33}static findPosition(t,s){let n=super.findPosition(t,s);return n.multiSegment=n.extended=79===n.headerLength,n.multiSegment?(n.chunkCount=t.getUint8(s+72),n.chunkNumber=t.getUint8(s+76),0!==t.getUint8(s+77)&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(t){return t.map(t=>t.chunk.getString()).join("")}normalizeInput(t){return"string"==typeof t?t:C.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=(function(t){let s={},n={};for(let t of ft)s[t]=[],n[t]=0;return t.replace(ut,(t,o,h)=>{if("<"===o){let o=++n[h];return s[h].push(o),`${t}#${o}`}return`${t}#${s[h].pop()}`})})(t);let s=st.findAll(t,"rdf","Description");0===s.length&&s.push(new st("rdf","Description",void 0,t));let n,o={};for(let t of s)for(let s of t.properties)n=ot(s.ns,o),nt(s,n);return(function(t){let s;for(let n in t)s=t[n]=p(t[n]),void 0===s&&delete t[n];return p(t)})(o)}assignToOutput(t,s){if(this.localOptions.parse)for(let[n,o]of Object.entries(s))switch(n){case"tiff":this.assignObjectToOutput(t,"ifd0",o);break;case"exif":this.assignObjectToOutput(t,"exif",o);break;case"xmlns":break;default:this.assignObjectToOutput(t,n,o)}else t.xmp=s}}s(et,"type","xmp"),s(et,"multiSegment",!0),B.set("xmp",et);class tt{static findAll(t){return ht(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(tt.unpackMatch)}static unpackMatch(t){let s=t[1],n=t[2],o=t[3].slice(1,-1);return o=lt(o),new tt(s,n,o)}constructor(t,s,n){this.ns=t,this.name=s,this.value=n}serialize(){return this.value}}const it="[\\w\\d-]+";class st{static findAll(t,s,n){if(void 0!==s||void 0!==n){s=s||it,n=n||it;var o=new RegExp(`<(${s}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else o=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return ht(t,o).map(st.unpackMatch)}static unpackMatch(t){let s=t[1],n=t[2],o=t[4],h=t[8];return new st(s,n,o,h)}constructor(t,s,n,o){this.ns=t,this.name=s,this.attrString=n,this.innerXml=o,this.attrs=tt.findAll(n),this.children=st.findAll(o),this.value=0===this.children.length?lt(o):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}get isListContainer(){return 1===this.children.length&&this.children[0].isList}get isList(){let{ns:t,name:s}=this;return"rdf"===t&&("Seq"===s||"Bag"===s||"Alt"===s)}get isListItem(){return"rdf"===this.ns&&"li"===this.name}serialize(){if(0===this.properties.length&&void 0===this.value)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return at(this.children.map(rt));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();let t={};for(let s of this.properties)nt(s,t);return void 0!==this.value&&(t.value=this.value),p(t)}}function nt(t,s){let n=t.serialize();void 0!==n&&(s[t.name]=n)}var rt=t=>t.serialize(),at=t=>1===t.length?t[0]:t,ot=(t,s)=>s[t]?s[t]:s[t]={};function ht(t,s){let n,o=[];if(!t)return o;for(;null!==(n=s.exec(t));)o.push(n);return o}function lt(t){if(null==(s=t)||"null"===s||"undefined"===s||""===s||""===s.trim())return;var s;let n=Number(t);if(!Number.isNaN(n))return n;let o=t.toLowerCase();return"true"===o||"false"!==o&&t.trim()}const ft=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],ut=new RegExp(`(<|\\/)(${ft.join("|")})`,"g");t.Exifr=ce,t.Options=le,t.allFormatters=ne,t.chunkedProps=J,t.createDictionary=E,t.default=Ee,t.extendDictionary=R,t.fetchUrlAsArrayBuffer=N,t.fileParsers=U,t.fileReaders=I,t.gps=Ae,t.gpsOnlyOptions=Pe,t.inheritables=se,t.orientation=Le,t.orientationOnlyOptions=Fe,t.otherSegments=Z,t.parse=ge,t.readBlobAsArrayBuffer=V,t.rotation=Te,t.rotations=De,t.segmentParsers=B,t.segments=Q,t.segmentsAndBlocks=te,t.tagKeys=j,t.tagRevivers=_,t.tagValues=G,t.thumbnail=Be,t.thumbnailOnlyOptions=Ue,t.thumbnailUrl=Ie,t.tiffBlocks=ee,t.tiffExtractables=ie,Object.defineProperty(t,"__esModule",{value:!0})}))}),"ff1dfa",[]);
__r("6898d5").extend({"homes.bys.photoEditModal.cancel":"취소","homes.bys.photoEditModal.confirm":"삭제","homes.bys.photoEditModal.delete_confirmation_message":"한 번 삭제된 사진은 복원될 수 없습니다.","homes.bys.photoEditModal.delete_confirmation_header":"이 사진을 삭제하시겠어요?","shared.More_Details":"자세히 보기"});
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/632a.d0d6b6bc09.js.map